import{M as e,e as r,u as a,_ as t,d as s,$ as i}from"./dynamic-import-helper-CTnsj-vI.js";import{p as n}from"./persistStore-BDYPfxbs.js";var l=(e=>(e.Canceled="canceled",e.Processing="processing",e.Succeeded="succeeded",e.RequiresAction="requires_action",e.RequiresCapture="requires_capture",e.RequiresPaymentMethod="requires_payment_method",e))(l||{}),u=(e=>(e.Plus="subscribed",e.TrialingCardless="trialingCardless",e.TrialingCard="trialingCard",e.ExpiredTrial="expiredTrial",e.ExpiredPlus="expiredPlus",e.PastDue="pastDue",e.Free="free",e))(u||{});const d=n((({loadedRef:e,loadingRef:n,refresh:l})=>{const d=r("userSubscriptionSummary",{state:()=>({active:!1,error:null,firstSubscriptionStart:null,hasPaymentMethod:!1,intent:null,pastDue:!1,subscriptionEnd:null,trialEnd:null,trialing:!1}),getters:{featuresNeedUpdate(e){return this.loaded?e.active&&!m.conditionalFeatures.featureEnabled("plus"):null},loaded:()=>e.value,loading:()=>n.value,status:e=>e.trialing&&e.hasPaymentMethod?u.TrialingCard:e.trialing&&!e.hasPaymentMethod?u.TrialingCardless:e.pastDue?u.PastDue:e.active?u.Plus:e.subscriptionEnd?u.ExpiredPlus:e.trialEnd?u.ExpiredTrial:u.Free,trialRemainingDays:e=>s.dateDiffIntegerDays(Date.now(),e.trialEnd??Date.now()),subscriptionDaysElapsed:e=>e.firstSubscriptionStart?s.dateDiffIntegerDays(new Date(e.firstSubscriptionStart),new Date)+1:0,expired(){return[u.ExpiredPlus,u.ExpiredTrial].includes(this.status)}},actions:{refresh(r=!1){if(!i())return l(r);e.value=!0}}});return(async()=>{const e=d();await a((()=>e.featuresNeedUpdate)).toBe(!0),t.resolveDeferral()})(),d}),{path:"user/subscription_summary",mode:e.TimestampStrict}),o=Object.freeze(Object.defineProperty({__proto__:null,default:d},Symbol.toStringTag,{value:"Module"}));export{u as S,l as a,o as b,d as u};