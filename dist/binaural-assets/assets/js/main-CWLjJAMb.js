const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/BaseMetricsApp-CQ5WxoqC.js","assets/js/dynamic-import-helper-CTnsj-vI.js","assets/js/array-YYQw31d9.js","assets/js/style-D-IRYiWS.js","assets/css/style-6nm_MYpP.css","assets/js/Logger-cMW5At62.js","assets/js/string-BBKP9xfj.js","assets/js/AppViewSwitchDynamic-ChSgUDaf.js","assets/js/SmoothReflow-QsxkeVSi.js","assets/js/ResizeSensor-ZXOsDHeC.js","assets/js/useAllComponentsMounted-VdWDSwjD.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/SmoothReflow-DzJ-QC-5.css","assets/js/appViewSwitchMixin-BsLJ76Hr.js","assets/css/AppViewSwitchDynamic-nwV8-yjr.css","assets/js/AppView-BMGOOodE.js","assets/css/AppView-CsYj23U-.css","assets/js/AppHeader-A32plZRR.js","assets/js/AppHeaderControl-kJjUFX4q.js","assets/css/AppHeaderControl-BU4A7Xbx.css","assets/js/constants-BfBD_H-d.js","assets/js/icon-close-DRlspKs3.js","assets/css/AppHeader-Cslc5PS9.css","assets/js/BaseIcon-BW2ar6VN.js","assets/css/BaseIcon-CPmL0n7V.css","assets/js/AppEmpty-D5gk-S-2.js","assets/css/AppEmpty-D0QAg47r.css","assets/js/BaseItemList-C63B-RAD.js","assets/js/constants-BpVlFj04.js","assets/js/index-998LMmMn.js","assets/css/BaseItemList-XxKea_Ij.css","assets/js/BaseMetric-ClLQP9bU.js","assets/js/metrics-DBFa0eDh.js","assets/js/errors-DV9ybRQO.js","assets/js/compareObjects-R6Hcs7xe.js","assets/js/reactiveCustomization-CEUTOUc3.js","assets/js/VueBase-C55TLWt3.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/pinia-B4IAWUO-.js","assets/js/portal-vue.esm-DdddSpdW.js","assets/js/AppLoading-DWsYUtJy.js","assets/css/AppLoading-DHYBGgbD.css","assets/js/BaseDropdown-CB3yfeIu.js","assets/js/BaseDropdownContent-C68ik0op.js","assets/js/constants-CALDQiUE.js","assets/css/BaseDropdownContent-DKsGy_8Z.css","assets/js/icon-ellipsis-D7nTOXaQ.js","assets/css/BaseDropdown-CwtM7hMN.css","assets/js/BaseDropdownOption-tB3ldrjh.js","assets/css/BaseDropdownOption-DaYMTb1b.css","assets/js/ToggleSwitch-BMo4SbmD.js","assets/css/ToggleSwitch-CTfmYf-M.css","assets/js/AppConfirmCancel-Dbtq22vw.js","assets/js/globalKeyEventManager-C6pBx38h.js","assets/css/AppConfirmCancel-DbaOXcDd.css","assets/js/FormFieldWrapper-BVlpMs4u.js","assets/css/FormFieldWrapper-Bg7cTjMQ.css","assets/js/FormInput-EzoeJ62n.js","assets/js/SoftFocus-BUhesXB-.js","assets/js/FormToggle-CRXN1Mz8.js","assets/css/FormToggle-DUKt37kY.css","assets/js/FormSelectIcon-COiVF-1l.js","assets/css/FormSelectIcon-OnWrqdmK.css","assets/js/clocks-BKX2E5hE.js","assets/js/countdowns-BaSVBIop.js","assets/js/icon-x-caret-half-Ciiq12QG.js","assets/js/LocationTypeahead-CdpQXTDo.js","assets/css/LocationTypeahead-DXTz2-um.css","assets/js/BaseForm-BjqauXKF.js","assets/js/FormMessage-D8y-6rLo.js","assets/js/icon-alert-BikrS7AG.js","assets/css/FormMessage-BcXv0ZVT.css","assets/css/BaseForm-CdgC6Psc.css","assets/js/AppPopup-D21ZzXTp.js","assets/css/AppPopup-DUjVA79X.css","assets/js/AppDash-Ic_PCFf2.js","assets/css/AppDash-JMHRJAX6.css","assets/js/AddMetric-CiWEKbdd.js","assets/js/appZStack-Zxx-wHpo.js","assets/js/icon-confetti-BvRSomF2.js","assets/js/internalDataMetrics-CHi96UKS.js","assets/js/focusModeHelpers-tDECULZC.js","assets/js/focusModeState-BPyBLUbE.js","assets/js/LocalStorageStoreSyncedItem-DMdfjgsv.js","assets/js/PomodoroTimers-CyrfcuWH.js","assets/js/persistStore-BDYPfxbs.js","assets/js/useAppToggle-eFKNFaJS.js","assets/js/focusModeInsightsViewState-f77ETMNP.js","assets/js/ViewState-DH0LvQYq.js","assets/js/CircleIndicator-D90MQjfF.js","assets/css/CircleIndicator-DucGE1qd.css","assets/js/modal-qMFaWR5h.js","assets/js/enums-1c3kgXdw.js","assets/js/AppContainer-BFIQ2qhm.js","assets/js/showAnyway-8ON2gVJd.js","assets/css/AppContainer-Okwrv5EP.css","assets/css/AddMetric-C90v9xyt.css","assets/css/BaseMetricsApp-COv1VTD3.css"])))=>i.map(i=>d[i]);
import"./VueBase-C55TLWt3.js";import{_ as e}from"./style-D-IRYiWS.js";import{computed as t,persistent as i}from"./reactiveCustomization-CEUTOUc3.js";import{O as s,ar as r,c as a,G as o,F as n,i as c,r as d,q as l,a9 as p,A as h,V as m,h as u}from"./dynamic-import-helper-CTnsj-vI.js";import{u as b,M as w}from"./metrics-DBFa0eDh.js";import f from"./BaseIcon-BW2ar6VN.js";import{u as v}from"./useAllComponentsMounted-VdWDSwjD.js";import{n as y}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{A as M}from"./AppDash-Ic_PCFf2.js";import{A as g,F as A,a as V}from"./AddMetric-CiWEKbdd.js";import{u as k}from"./ViewState-DH0LvQYq.js";import{u as S}from"./countdowns-BaSVBIop.js";import{u as _}from"./clocks-BKX2E5hE.js";import C from"./AppContainer-BFIQ2qhm.js";import{B as j}from"./BaseMetric-ClLQP9bU.js";import{c as I,b as T}from"./constants-BfBD_H-d.js";import{b as D}from"./index-998LMmMn.js";import{u as x}from"./useAppToggle-eFKNFaJS.js";const B=y(s({name:"MetricAdjust",components:{BaseIcon:f},props:{item:{type:Object,required:!0},location:{type:String,required:!0}},setup:()=>({...v(),metricsStore:b(),capture:r("capture")}),methods:{async adjust(e,t){var i;e.metaKey&&(t*=100),e.shiftKey&&(t*=10);const s=Number(Number(this.item.value).toPrecision(12))+t;await this.metricsStore.update(this.item.id,{value:`${s}`}),null==(i=this.capture)||i.call(this,`metric ${t>0?"in":"de"}crement`,{properties:{location:this.location}})}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"metric-adjust",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"icon-wrapper",on:{click:function(t){return e.adjust(t,-1)}}},[t("base-icon",{attrs:{src:"circle-minus"}})],1),t("div",{staticClass:"icon-wrapper",attrs:{"data-test":"metric-adjust-add"},on:{click:function(t){return e.adjust(t,1)}}},[t("base-icon",{attrs:{src:"circle-plus"}})],1)])}),[],!1,null,"4d795665").exports;const z=y(s({name:"BaseMetricDash",components:{AppDash:M,MetricAdjust:B},props:{item:{type:Object,required:!0}},emits:["click"],setup:()=>({...v(),selectedMetric:r("selectedMetric")}),computed:{icon(){return this.itemIsMetric(this.item)&&this.item.authNeeded?"circle-alert":this.item.icon??""},selected(){var e;return(null==(e=this.selectedMetric)?void 0:e.id)===this.item.id}},methods:{itemIsMetric:e=>e instanceof w}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("app-dash",{staticClass:"base-metric-dash",attrs:{icon:e.icon,label:e.item.name,title:e.item.displayTooltip,"app-visible":e.selected,"inline-label-width":!0,"blur-background-hover":!0,"background-blur":"bottom","data-test":"app-dash"},on:{click:function(t){return e.$emit("click",t)}},scopedSlots:e._u([{key:"icon-right",fn:function(){return[t("span",[e._v(e._s(e.item.displayValue))])]},proxy:!0},{key:"icon-below",fn:function(){return[e.itemIsMetric(e.item)&&e.item.shouldDisplayQuickAdjust?t("metric-adjust",{attrs:{item:e.item,location:"dash"}}):e._e()]},proxy:!0}])})}),[],!1,null,"d3b24eb4").exports;var W=(e=>(e.Archived="archive",e.List="list",e.MetricTypeSelect="metricTypeSelect",e.Form="form",e))(W||{});const O=k("baseMetrics",{views:{archive:{order:1},list:{order:2,defaultView:!0},metricTypeSelect:{order:3},form:{order:4}}}),P=(e,t)=>D(e,(e=>{window.requestAnimationFrame((()=>{var i;const s=e[0];(null==(i=null==s?void 0:s.borderBoxSize)?void 0:i[0])&&t({width:s.borderBoxSize[0].inlineSize,height:s.borderBoxSize[0].blockSize})}))})),F=new h({feature:"metrics"}),L=s({name:"BaseMetrics",components:{AppContainer:C,AppDash:M,BaseMetricsApp:()=>e((()=>import("./BaseMetricsApp-CQ5WxoqC.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98])),AddMetric:g,BaseMetricDash:z,FocusModeMetric:A},setup(){const e=a(),t=a(),i=a(0),s=a(0);P(e,(({width:e})=>i.value=e)),P(t,(({width:e})=>s.value=e));const r=a(),d=a();o("selectedMetric",n((()=>r.value))),o("selectedType",n((()=>d.value)));const l=_(),p=S(),h=b();return o("activeTypeStore",n((()=>d.value===j.Clock?l:d.value===j.Countdown?p:h))),{...v({widgetId:"base-metrics"}),...x(O,{analytics:F}),nippleDisplacement:c.nippleDisplacementPx,viewStateStore:O(),add:a(),clocksStore:l,countdownsStore:p,metricsStore:h,baseMetric:e,dashItems:t,appContainerWidth:i,dashItemsWidth:s,selectedMetric:r,selectedType:d,AddMetricTypeData:V}},data:()=>({activeItem:void 0,right:0,top:0,enableFadeTransitions:!1}),computed:{iconsOnly(){return this.appContainerWidth<this.dashItemsWidth||this.$mobile},overlayConfirmationVisible(){var e,t;return(null==(t=null==(e=this.viewStateStore)?void 0:e.confirmationProps)?void 0:t.type)===I.Overlay},allLoaded(){return this.metricsStore.loaded&&this.clocksStore.loaded&&this.countdownsStore.loaded},allMetricsHidden(){return!(this.metricsVisible||this.clocksVisible||this.countdownsVisible||this.focusModeInsightVisible)},metricsVisible:()=>t.metricVisible,clocksVisible:()=>t.multiClockVisible,countdownsVisible:()=>t.countdownVisible,focusModeInsightVisible:()=>t.focusInsightVisible,pinnedClocks(){return this.clocksVisible?[...this.clocksStore.randomItems,...this.clocksStore.pinnedItems]:[]},pinnedCountdowns(){return this.countdownsVisible?[...this.countdownsStore.randomItems,...this.countdownsStore.pinnedItems]:[]},pinnedMetrics(){return this.metricsVisible?[...this.metricsStore.randomItems,...this.metricsStore.pinnedItems]:[]},pinnedItems(){return[...this.pinnedClocks,...this.pinnedCountdowns,...this.pinnedMetrics]},keepAddMetricVisible(){return this.popupActive&&!this.selectedMetric},showLabel:()=>t.dashAppTextLabels===T.Always,weatherOrCalendarVisible:()=>t.weatherVisible||t.calendarVisible,weatherDashAppWidth:()=>t.weatherVisible?d.weatherDashAppWidth:0,calendarDashAppWidth:()=>t.calendarVisible?d.calendarDashAppWidth:0},watch:{async allLoaded(e){e&&(await l(),this.enableFadeTransitions=!0)},popupActive(){this.popupActive||(this.selectedMetric=void 0,this.selectedType=void 0)},metricsVisible:{handler(){this.metricsVisible&&this.metricsStore.refresh()},immediate:!0},countdownsVisible:{handler(){this.countdownsVisible&&this.countdownsStore.refresh()},immediate:!0},clocksVisible:{handler(){this.clocksVisible&&this.clocksStore.refresh()},immediate:!0}},mounted(){var e,t;this.pinnedItems.length&&(this.onAppContainerResize({width:(null==(e=this.baseMetric)?void 0:e.$el.clientWidth)??0}),this.onDashItemsResize({width:(null==(t=this.dashItems)?void 0:t.clientWidth)??0}))},methods:{onAppContainerResize({width:e}){this.appContainerWidth=e},onDashItemsResize({width:e}){this.dashItemsWidth=e},async addMetric(e){let t=W.Form;e===j.Countdown?(i.countdownVisible=!0,this.countdownsStore.newItem()):e===j.Clock?(i.multiClockVisible=!0,this.clocksStore.newItem()):(i.metricVisible=!0,t=W.MetricTypeSelect),await this.togglePopup(!0),this.selectedType=e,await this.viewStateStore.setActiveView(t),this.add&&this.positionApp(this.add.$el)},async toggleApp(e,t,i){if(i&&this.selectedMetric&&i.id===this.selectedMetric.id)return this.togglePopup(!1);this.selectedType=t,this.selectedMetric=i,this.positionApp(e.currentTarget),await this.togglePopup(!0)},positionApp(e){var t;const i=e.getBoundingClientRect(),s=null==(t=this.baseMetric)?void 0:t.$el.getBoundingClientRect();s&&(this.top=Math.round(i.bottom-s.top),this.right=Math.round(s.right-i.right+i.width/2-this.nippleDisplacement))}}}),$=()=>{p(((e,t)=>({be7dec22:e.weatherDashAppWidth,fd0c0a9e:e.calendarDashAppWidth})))},q=L.setup;L.setup=q?(e,t)=>($(),q(e,t)):$;const R=y(L,(function(){var e=this,t=e._self._c;return e._self._setupProxy,e.allMetricsHidden?e._e():t("app-container",{ref:"baseMetric",staticClass:"base-metric",class:{"icons-only":e.iconsOnly},attrs:{"data-test":"base-metric","app-name":"baseMetric",overlay:e.popupActive}},[e.iconsOnly?t("transition-group",{staticClass:"dash-items",attrs:{tag:"div",name:"fade",duration:e.enableFadeTransitions?200:0}},[e.weatherOrCalendarVisible?t("div",{key:"dash-measure",staticClass:"top-right-dash-measure",class:{labels:e.showLabel}}):e._e(),e._l(e.AddMetricTypeData,(function(i,s){return t("app-dash",{key:s,attrs:{icon:i.icon,"data-type":s,"data-test":s,label:i.name},on:{click:function(t){return e.toggleApp(t,s)}}})}))],2):e._e(),t("transition-group",{ref:"dashItems",staticClass:"dash-items pinned-items",attrs:{tag:"div",name:"fade",duration:e.enableFadeTransitions?200:0}},[e.weatherOrCalendarVisible?t("div",{key:"dash-measure",staticClass:"top-right-dash-measure",class:{labels:e.showLabel}}):e._e(),e.focusModeInsightVisible?t("focus-mode-metric",{key:"focus-mode-insight"}):e._e(),e._l(e.pinnedItems,(function(i){return t("base-metric-dash",{key:i.id,attrs:{item:i,"data-type":i.type,"data-test":i.type+"-app-dash"},on:{click:function(t){return e.toggleApp(t,i.type,i)}}})})),t("add-metric",{key:"add",ref:"add",attrs:{"force-active":e.keepAddMetricVisible},on:{add:e.addMetric}})],2),t("transition",{attrs:{name:"slide-down-fade"}},[e.popupActive?t("base-metrics-app",{attrs:{right:e.right,top:e.top}}):e._e()],1)],1)}),[],!1,null,"6ee60633").exports,E=document.querySelector(".region.top-right"),N=document.createElement("div");E.appendChild(N),new m({render:()=>u(R)}).$mount(N);const H=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{W as B,B as M,H as m,O as u};