import{L as t,l as e}from"./loginStepMixin-BXtcjtUB.js";import{L as i}from"./LoginInput-4iSWOIf5.js";import{l as o}from"./enums-1c3kgXdw.js";import{a as s}from"./authService-UjcjSrh8.js";import{g as r}from"./partner-WB-8CHBi.js";import n from"./icon-back-D7vBl-rG.js";import{n as a}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./SmoothReflow-QsxkeVSi.js";import"./ResizeSensor-ZXOsDHeC.js";import"./useAllComponentsMounted-VdWDSwjD.js";import"./dynamic-import-helper-CTnsj-vI.js";import"./array-YYQw31d9.js";import"./style-D-IRYiWS.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./icon-next-CI-_n-sg.js";import"./SoftFocus-BUhesXB-.js";import"./MobileBlur-B2s9dLKD.js";import"./auth-BwdMrzFn.js";import"./persistStore-BDYPfxbs.js";import"./legacyUserMigration-CaazFMYU.js";import"./migrateLegacyUserMessageHandler-CZ8nZZlg.js";import"./reactiveCustomization-CEUTOUc3.js";import"./VueBase-C55TLWt3.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-B4IAWUO-.js";import"./portal-vue.esm-DdddSpdW.js";const m=a({name:"LoginEmail",components:{LoginLayout:t,LoginInput:i},mixins:[e],inject:["capture"],props:{shouldDisplayNewsletterOptIn:{type:Boolean,required:!0}},data:()=>({message:`Enter your email to create a ${r().name} account or log in.`}),mounted(){this.capture("email-step show")},methods:{onEnter(){this.checkEmail()},onEscape(){this.goToName("hotkey")},goToName(t="click"){this.capture("change provider click",{method:t}),this.$emit("goToSubStep",o.PROVIDER)},stayLoggedOut(){return this.capture("email-step dismiss",{method:"click"}),this.setLoadingWithErrorHandling((async()=>{await s.stayUnregistered(this.name),this.$emit("complete")}))},checkEmail(){return this.setLoadingWithErrorHandling((async t=>{const{emailExists:e,newsletterOptIn:i,ssoOnly:r,loginProviders:n}=await s.checkEmail(this.email);this.$emit("update:shouldDisplayNewsletterOptIn",i),this.$emit("update:loginProviders",n);let a=o.CHOOSE_PASSWORD;r&&e?a=o.ADD_PASSWORD_TO_ACCOUNT:e&&(a=o.ENTER_PASSWORD),this.$emit("goToSubStep",a),t()}))}}},(function(){var t=this,e=t._self._c;return e("login-layout",{attrs:{loading:t.loading,"data-test":"email-step"},on:{submit:t.checkEmail},scopedSlots:t._u([{key:"actions-top-left",fn:function(){return[e("div",{staticClass:"dash-button",attrs:{"data-test":"provider-button"},on:{click:t.goToName}},[e("inline-svg",{staticClass:"icon icon-back",attrs:{src:n}}),e("span",[t._v("Continue with...")])],1)]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.$partner.name)+" account ")]},proxy:!0},{key:"question",fn:function(){return[t._v(" What's your email"+t._s(t.name?", "+t.name:"")+"? ")]},proxy:!0},{key:"input",fn:function(){return[e("login-input",{ref:"login-input",attrs:{value:t.email,disabled:t.loading,type:"email"},on:{input:function(e){return t.$emit("update:email",e)},submit:t.checkEmail}})]},proxy:!0},{key:"message",fn:function(){return[e("div",{domProps:{innerHTML:t._s(t.computedMessage)}})]},proxy:!0}])})}),[],!1,null,null).exports;export{m as default};