import{D as e,M as t,e as s,d as a}from"./dynamic-import-helper-CTnsj-vI.js";import{a as i}from"./array-YYQw31d9.js";var r=(e=>(e.SitesResisted="sitesResisted",e))(r||{});const d=e=>s("streaks",{state:()=>({data:{},loading:!1,loaded:!1}),getters:{getCurrentStreakBySubset:e=>t=>{const s=Object.values(e.data).filter((e=>e.subset===t));let a=0;s.sort(((e,t)=>t.timestamp-e.timestamp));for(const e of s){if(!e.valid)return a;a++}return a},getValidStreaksBySubsetPastDays:e=>(t,s)=>a.filterObject(e.data,(e=>e.subset===t&&e.valid&&e.timestamp>=s)),getValidSitesResistedSince(){return e=>Object.values(this.getValidStreaksBySubsetPastDays(r.SitesResisted,e)).length},getSitesResistedStreak(){return()=>this.getCurrentStreakBySubset(r.SitesResisted)}},actions:{refresh(){this.loading||this.loaded||(this.loading=!0,e.get({success:e=>{e.forEach((e=>this.data[e.id]=e)),this.loading=!1,this.loaded=!0},failure:()=>{this.loading=!1}}))},create:t=>e.create({id:i(),...t})}}),o=d(new class{constructor(e){this.dataSyncService=e}get(e){this.dataSyncService.get(e)}create(e){return this.dataSyncService.create(e.id,e)}}(new e("streaks",{mode:t.TimestampStrict}))),c=Object.freeze(Object.defineProperty({__proto__:null,default:o,makeStreaksStore:d},Symbol.toStringTag,{value:"Module"}));export{r as S,c as s,o as u};