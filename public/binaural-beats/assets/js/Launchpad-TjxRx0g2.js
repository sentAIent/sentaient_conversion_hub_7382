import{b as t}from"./bookmarkUtils-CuPNm2UD.js";import{g as s,d as i,A as e}from"./dynamic-import-helper-CTnsj-vI.js";import{u as a}from"./useAllComponentsMounted-VdWDSwjD.js";import{p as o}from"./promisifiedChrome-vBWwQWBS.js";import{s as n}from"./showAnyway-8ON2gVJd.js";import{persistent as r}from"./reactiveCustomization-CEUTOUc3.js";import{o as l}from"./modal-qMFaWR5h.js";import{n as p}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./array-YYQw31d9.js";import"./style-D-IRYiWS.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./VueBase-C55TLWt3.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-B4IAWUO-.js";import"./portal-vue.esm-DdddSpdW.js";import"./enums-1c3kgXdw.js";const c=new e({feature:"launchpad"});const u=p({name:"Launchpad",setup:()=>({...a({onAllComponentsMountedOverride(){}}),showAnyway:n}),data:()=>({topSites:[]}),created(){this.initTopSites()},methods:{openLinks(t,s){c.capture("launchpad link click");let i=m.models.bookmarksSettings.get("openInNewTab")||t.metaKey||"auxclick"===t.type;o.tabs.openUrl(s,i)},async initTopSites(){const e=s();if("topSites"in e&&e.topSites)t.requestFaviconPermissionIfNeeded("Launchpad");else{this.emitComponentMounted();let t={permissions:["topSites"]};i.isChrome()&&t.permissions.push("favicon");if(!(await l(t,{source:"Launchpad",reason:"To display your top sites"})))return r.launchpadVisible=!1}const a=await o.topSites.get();a.forEach((s=>{s.hostname=new URL(s.url).hostname,s.imgSrc=t.favicon(s.url,32),(s.title.startsWith("https://")||s.title.startsWith("http://"))&&(s.title=""),s.title.includes("|")&&(s.title=s.title.split("|").at(-1).trim())})),this.topSites=a.slice(0,8),this.emitComponentMounted()}}},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"app-container launchpad",class:{"show-anyway":t.showAnyway.includes("launchpad")},attrs:{"data-test":"launchpad","data-show-anyway":"launchpad"}},[s("div",{staticClass:"top-sites"},t._l(t.topSites,(function(i){return s("div",{key:i.url,staticClass:"site",attrs:{"data-test":"launchpad-item"},on:{click:function(s){return t.openLinks(s,i.url)},auxclick:function(s){return t.openLinks(s,i.url)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i.imgSrc,draggable:"false"}})]),s("div",{staticClass:"title"},[t._v(t._s(i.title||i.hostname||" "))]),s("div",{staticClass:"tooltip"},[s("div",{staticClass:"tooltip-title"},[t._v(t._s(i.title||i.hostname||" "))]),s("div",{staticClass:"full-url"},[t._v(t._s(i.url))])])])})),0)])}),[],!1,null,"89a708d2").exports;export{u as default};