import{O as t,A as s,V as e,h as a}from"./dynamic-import-helper-CTnsj-vI.js";import r from"./AppContainer-BFIQ2qhm.js";import{S as n}from"./SmoothReflow-QsxkeVSi.js";import o from"./BaseIcon-BW2ar6VN.js";import{A as i}from"./AppHeaderControl-kJjUFX4q.js";import{u}from"./plusStatusBanner-lkA_UvaV.js";import{S as p}from"./SubscriptionSummary-BTlVYU_L.js";import{n as l}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./VueBase-C55TLWt3.js";import"./array-YYQw31d9.js";import"./style-D-IRYiWS.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./showAnyway-8ON2gVJd.js";import"./reactiveCustomization-CEUTOUc3.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-B4IAWUO-.js";import"./portal-vue.esm-DdddSpdW.js";import"./useAllComponentsMounted-VdWDSwjD.js";import"./ResizeSensor-ZXOsDHeC.js";import"./persistStore-BDYPfxbs.js";const c=new s({feature:"plus status banner"});const d=l(t({name:"PlusStatusBanner",components:{AppHeaderControl:i,BaseIcon:o,SmoothReflow:n,AppContainer:r},setup:()=>({plusStatusBannerStore:u()}),computed:{expiredStatusCopy(){switch(this.plusStatusBannerStore.activeSubscriptionSummaryStore.status){case p.ExpiredTrial:return"Your Plus trial has expired";case p.ExpiredPlus:default:return"You've lost access to Plus!"}}},async mounted(){await this.plusStatusBannerStore.activeSubscriptionSummaryStore.refresh(),m.widgetManager.appReady("plus-status-banner")},methods:{openUpgradeModal(){c.capture("add payment clicked",{type:this.plusStatusBannerStore.activeSubscriptionSummaryStore.status});null!==m.models.teamInfo.get("team")?m.cmd("window.account.open.login","team/upgrade"):m.cmd("window.account.open.login","subscription?add_card=true")},openActionRequiredModal(){c.capture("action required clicked",{type:this.plusStatusBannerStore.activeSubscriptionSummaryStore.status});null!==m.models.teamInfo.get("team")?m.cmd("window.account.open.login","team/home"):m.cmd("window.account.open.login","subscription")},openPastDue(){null!==m.models.teamInfo.get("team")?m.cmd("window.account.open.login","team/settings/billing"):m.cmd("window.account.open.login","subscription")},closeBanner(){c.capture("dismissed",{type:this.plusStatusBannerStore.activeSubscriptionSummaryStore.status}),this.plusStatusBannerStore.trialVisible?this.plusStatusBannerStore.dismissTrialBannerForDay():this.plusStatusBannerStore.expiredVisible?this.plusStatusBannerStore.dismissExpiredBannerIndefinitely():this.plusStatusBannerStore.pastDueVisible&&this.plusStatusBannerStore.dismissPastDueBanner()}}}),(function(){var t=this,s=t._self._c;return t._self._setupProxy,s("smooth-reflow",{attrs:{disabled:t.plusStatusBannerStore.bannerVisible}},[t.plusStatusBannerStore.bannerVisible?s("app-container",{staticClass:"plus-status-banner dark dark-full",attrs:{"app-name":"plus-status-banner","data-test":"plus-status-banner"}},[t.plusStatusBannerStore.requiresActionVisible?[s("span",{staticClass:"status-title"},[t._v("Action is required on your account to confirm your card")]),s("button",{staticClass:"dash-button",attrs:{"data-test":"requires-action"},on:{click:t.openActionRequiredModal}},[t._v("Complete confirmation")])]:t.plusStatusBannerStore.trialVisible?[s("span",{staticClass:"status-title"},[t._v(" "+t._s(t.plusStatusBannerStore.trialDaysText)+" remaining in Plus trial â€¢ Don't lose access to Plus! ")]),s("button",{staticClass:"dash-button",attrs:{"data-test":"upgrade"},on:{click:t.openUpgradeModal}},[t._v("Subscribe")])]:t.plusStatusBannerStore.expiredVisible?[s("span",{staticClass:"status-title"},[t._v(t._s(t.expiredStatusCopy))]),s("button",{staticClass:"dash-button",attrs:{"data-test":"upgrade"},on:{click:t.openUpgradeModal}},[t._v("Subscribe to access all features")])]:t.plusStatusBannerStore.pastDueVisible?[s("span",{staticClass:"status-title"},[t._v("We were unable to charge the card you have on file")]),s("button",{staticClass:"dash-button",attrs:{"data-test":"requires-action"},on:{click:t.openPastDue}},[t._v("Update payment")])]:t._e(),t.plusStatusBannerStore.bannerDismissDisabled?t._e():s("app-header-control",{attrs:{"data-test":"dismiss"},on:{click:t.closeBanner}},[s("base-icon",{staticClass:"icon close",attrs:{src:"icon-close",size:"11px"}})],1)],2):t._e()],1)}),[],!1,null,"aeb1debd").exports,S=document.querySelector(".region.top-bar"),b=document.createElement("div");S&&S.prepend(b);const h=m.models.teamInfo.get("team");(null===h||h.userIsAdmin)&&new e({render:()=>a(d)}).$mount(b);