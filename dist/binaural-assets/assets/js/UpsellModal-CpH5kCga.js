import t from"./icon-back-D7vBl-rG.js";import s from"./icon-close-DRlspKs3.js";import{n as e}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{c as a,K as i,d as l,$ as r,A as n}from"./dynamic-import-helper-CTnsj-vI.js";import{s as o}from"./enums-1c3kgXdw.js";import{u as c,c as d}from"./index-998LMmMn.js";import{o as u}from"./upgrade-BheRcOni.js";import p from"./icon-clean-C-ZtxDm4.js";const h=e({name:"Upsell",components:{ModalBanner:e({name:"ModalBanner",props:{sales:{type:Object,default:()=>({})},showClose:{type:Boolean,default:!0},showBack:{type:Boolean,default:!1}},computed:{date:()=>m.models.date,time(){return new Date(this.date.get("seconds"))},saleInfo(){return this.sales&&this.sales.yearly},saleTimeLeft(){return new Date(this.sales.yearly.endDate)-this.time},stringCountdown(){if(!this.sales||!this.sales.yearly.endDate)return"";if(this.saleTimeLeft<=0)return"Sale Has Ended";const t=Math.floor(this.saleTimeLeft/1e3),s=m.utils.twoDigit(t%60),e=Math.floor(t/60),a=m.utils.twoDigit(e%60),i=Math.floor(e/60),l=m.utils.twoDigit(i%24);return"Ends in "+Math.floor(i/24)+"d "+l+"h "+a+"m "+s+"s"}}},(function(){var e=this,a=e._self._c;return a("div",{staticClass:"sale"},[e.showBack?a("div",{staticClass:"back-container"},[a("div",{staticClass:"back icon-wrapper",attrs:{"data-test":"back"},on:{click:function(t){return e.$emit("goBack")}}},[a("inline-svg",{staticClass:"icon icon-back",attrs:{src:t}})],1)]):e._e(),a("span",{staticClass:"text"},[a("div",{staticClass:"description"},[e._v(e._s(e.saleInfo.title)),a("span",{staticClass:"divider"},[e._v("â€“")]),e._v(e._s(e.saleInfo.percentOff)+"% Off")]),a("div",{staticClass:"countdown"},[e._v(e._s(e.stringCountdown))])]),e.showClose?a("div",{staticClass:"close-container"},[a("div",{staticClass:"icon-wrapper close",attrs:{"data-test":"close"},on:{click:function(t){return e.$emit("close")}}},[a("inline-svg",{staticClass:"icon icon-close",attrs:{src:s}})],1)]):e._e()])}),[],!1,null,"7fcae1e4").exports,UpgradeButton:e({name:"UpgradeButton",setup(){const t=a();return{circle:a(),shimmerMask:t,buttonBoundingBox:c(t),mouse:d({touch:!1}),isSafari:i()}},computed:{transformShimmerMask(){return`translate(${this.mouse.x.value-this.buttonBoundingBox.x.value}px, ${this.mouse.y.value-this.buttonBoundingBox.y.value}px)`}},watch:{transformShimmerMask:{handler(t){var s;null==(s=this.circle)||s.animate({transform:t},{duration:800,fill:"forwards",easing:"ease-in-out"})},immediate:!0}}},(function(){var t=this,s=t._self._c;return s("a",{staticClass:"upgrade-button"},[t._m(0),t._m(1),s("div",{staticClass:"background"}),t.isSafari?t._e():s("div",{staticClass:"chroma-bg shimmer"},[t._m(2)]),s("div",{staticClass:"content"},[t._t("default")],2),s("svg",{ref:"shimmerMask",attrs:{id:"shimmer-mask-svg"}},[s("mask",{attrs:{id:"shimmer-mask"}},[s("circle",{ref:"circle",staticClass:"circle",attrs:{r:"50",cx:"0",cy:"0",fill:"white"}})])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"chroma-bg border"},[t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])])},function(){var t=this._self._c;return t("div",{staticClass:"chroma-bg glow"},[t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])])},function(){var t=this._self._c;return t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])}],!1,null,"a5f72d03").exports},props:{type:{type:String,default:"General"},eventSource:{type:String,default:""},eventFeature:{type:String,default:""},eventType:{type:String,default:""},plans:{type:Object,default:()=>({})},sales:{type:Object,default:()=>({})},headerTitle:{type:String,default:"Available on Momentum Plus"}},setup:()=>({isSafari:l.isSafari(),stepsEnum:o,userIsLegacyUnregistered:r}),computed:{saleActive(){return this.sales&&Object.keys(this.sales).length},sale(){return this.sales&&this.sales.yearly}},created(){m.on("globalEvent:esc",this.close);let t={feature:this.eventFeature||this.type};this.eventType&&(t.type=this.eventType),this.analytics=new n(t)},mounted(){m.upsellModalActive=!0,this.analytics.capture("upsell show",{location:this.eventSource}),m.commandManager.beforeExecute("upsell.upgrade")},destroyed(){m.upsellModalActive=!1,m.off("globalEvent:esc",this.close)},methods:{close(){m.trigger("modal:close")},upgrade(){this.analytics.capture("upsell click"),u()}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"upsell-modal",class:`${t.type}-upsell`,attrs:{"data-test":`${t.type}-upsell`}},[t.saleActive?e("modal-banner",{attrs:{sales:t.sales},on:{close:t.close}}):t._e(),e("header",{staticClass:"header"},[e("div",{staticClass:"header-left"}),e("div",{staticClass:"header-title"},[t._v(t._s(t.headerTitle))]),e("div",{staticClass:"header-right"},[t.saleActive?t._e():e("span",{staticClass:"icon-wrapper hide",attrs:{"data-test":"close"},on:{click:t.close}},[e("inline-svg",{staticClass:"icon icon-hide",attrs:{src:s}})],1)])]),e("main",{staticClass:"body"},[e("div",{staticClass:"body-header"},[e("div",{staticClass:"title",attrs:{"data-test":"upsell-title"}},[t._t("title")],2),e("div",{staticClass:"description",attrs:{"data-test":"upsell-description"}},[t._t("description")],2)]),t._t("body"),t._t("default")],2),e("footer",{staticClass:"footer"},[e("upgrade-button",{attrs:{"data-test":"upsell-cta"},nativeOn:{click:function(s){return t.upgrade.apply(null,arguments)}}},[e("inline-svg",{staticClass:"icon",attrs:{src:p}}),t._v("Upgrade to Plus ")],1),e("div",{staticClass:"button-desc"},[t.isSafari||t.userIsLegacyUnregistered()?t._e():[t._v(" Only "),t.saleActive?[e("strong",[e("s",{staticClass:"strike"},[t._v("$"+t._s(t.plans.yearly.friendlyMonthlyPrice))]),t._v(" $"+t._s(t.sale.friendlyMonthlyPrice))]),t._v("/month.")]:t.plans.yearly?[t._v("$"+t._s(t.plans.yearly.friendlyMonthlyPrice)+"/month.")]:t._e()],t._v(" 30-day money-back guarantee. "),t.isSafari?t._e():e("a",{staticClass:"learn-more",attrs:{href:"https://momentumdash.com/plus",target:"_blank"}},[e("strong",[t._v("Learn more")])])],2)],1)],1)}),[],!1,null,"eb852506").exports;export{h as U};