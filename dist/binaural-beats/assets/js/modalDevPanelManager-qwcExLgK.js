import{V as e,r as t}from"./dynamic-import-helper-CTnsj-vI.js";import{g as s,d as i}from"./onboarding-Di5GE543.js";import"./array-YYQw31d9.js";import"./style-D-IRYiWS.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./enums-1c3kgXdw.js";import"./helpers-BTpQmO5s.js";import"./TabLeaderElection-Ddi84wmm.js";import"./focusModeState-BPyBLUbE.js";import"./LocalStorageStoreSyncedItem-DMdfjgsv.js";import"./onboarding-B35lV45t.js";import"./compareObjects-R6Hcs7xe.js";import"./modal-BWwnzHDf.js";import"./SubscriptionSummary-BTlVYU_L.js";import"./persistStore-BDYPfxbs.js";import"./reactiveCustomization-CEUTOUc3.js";import"./VueBase-C55TLWt3.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-B4IAWUO-.js";import"./portal-vue.esm-DdddSpdW.js";import"./constants-CALDQiUE.js";import"./constants-BfBD_H-d.js";import"./authService-UjcjSrh8.js";import"./auth-BwdMrzFn.js";import"./legacyUserMigration-CaazFMYU.js";import"./migrateLegacyUserMessageHandler-CZ8nZZlg.js";import"./login-HJtMK9QU.js";import"./icon-confetti-BvRSomF2.js";import"./focusModeHelpers-tDECULZC.js";import"./PomodoroTimers-CyrfcuWH.js";import"./experiments-6paecGsK.js";import"./siteBlockerGroups-BbPmPcem.js";import"./constants-Dqx3dGLK.js";import"./SettingsTypes-BotgHBzA.js";import"./accessToken-Cx8MZLdN.js";import"./tasksMockData-CwjLszHJ.js";import"./tasksViewState-qOrGChOD.js";import"./ViewState-DH0LvQYq.js";import"./appZStack-Zxx-wHpo.js";const p=new(e.extend({name:"ModalDevPanelManager",data:()=>({experimentMap:s(),definitions:i,pinnedStep:null}),methods:{setStepActive(e,t){const s=()=>m.trigger("modal:show",e,{subStepIndex:t,force:!0});m.modals?s():m.once("modalContainer:created:checkForced",s)},setPinnedStepActiveOnDashLoad({stepId:e,subStepIndex:s,experimentId:i,variantId:p}={}){let n;if(i){const t=this.experimentMap[i],s=t&&t.variants[p];n=s&&s.steps[e]}else n=this.definitions[e];n&&(this.toggleStepPinned(n,{stepId:e,subStepIndex:s,experimentId:i,variantId:p}),t.appsReady?this.setStepActive(n,s):m.once("appsReady",(()=>{this.setStepActive(n,s)})))},toggleStepPinned(e,{stepId:t,subStepIndex:s,experimentId:i,variantId:p}={}){const n=localStorage.getObject("devPanel:pinnedStep");n?this.objectsMatch(n,{stepId:t,subStepIndex:s,experimentId:i,variantId:p})?(this.$set(e,"pinned",!e.pinned),this.pinnedStep=e.pinned?e:null,this.updateSubStepIndex(e,e.pinned?s:void 0),null===this.pinnedStep&&m.trigger("modal:close")):this.objectsMatch((({stepId:e,experimentId:t,variantId:s})=>({stepId:e,experimentId:t,variantId:s}))(n),{stepId:t,experimentId:i,variantId:p})?this.updateSubStepIndex(e,s):(this.pinnedStep&&(this.$set(this.pinnedStep,"pinned",!1),this.updateSubStepIndex(this.pinnedStep,void 0)),this.$set(e,"pinned",!0),this.updateSubStepIndex(e,s),this.pinnedStep=e):(this.$set(e,"pinned",!0),this.pinnedStep=e,this.updateSubStepIndex(e,s)),e.pinned?localStorage.setObject("devPanel:pinnedStep",{stepId:t,subStepIndex:s,experimentId:i,variantId:p}):localStorage.removeItem("devPanel:pinnedStep")},updateSubStepIndex(e,t){void 0===t?this.$delete(e,"pinnedSubStepIndex"):this.$set(e,"pinnedSubStepIndex",t)},objectsMatch:(e,t)=>new Array(...new Set([...Object.keys(e),...Object.keys(t)])).every((s=>e[s]===t[s]))}}));export{p as default};