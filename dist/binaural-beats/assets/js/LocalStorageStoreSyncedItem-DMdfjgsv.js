import{c as t,w as e}from"./dynamic-import-helper-CTnsj-vI.js";class a{constructor(a,r){this.propertyGetter=t(null),this.parseLocalStorageValue=(t,e)=>("string"==typeof t?e:JSON.parse(e||"null"))||t;const o=localStorage.getItem(a),s=this.parseLocalStorageValue(r,o);this.localStorageKey=a,this.defaultValue=r,this.property=t(s),e((()=>this.currentValue),(t=>localStorage.setItem(this.localStorageKey,"string"==typeof t?t:JSON.stringify(t)))),this.watchLocalStorageChanges()}get currentValue(){return this.propertyGetter.value?this.propertyGetter.value():this.property.value}switchOverToWatchedStoreItem(t){this.stopWatchingLocalStorageChanges(),this.propertyGetter.value=t}updateOnLocalStorageEvent(t){t.key===this.localStorageKey&&(this.property.value=this.parseLocalStorageValue(this.defaultValue,t.newValue))}watchLocalStorageChanges(){window.addEventListener("storage",(t=>this.updateOnLocalStorageEvent(t)))}stopWatchingLocalStorageChanges(){window.removeEventListener("storage",(t=>this.updateOnLocalStorageEvent(t)))}}export{a as L};