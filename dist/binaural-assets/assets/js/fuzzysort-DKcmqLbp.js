import e from"./icon-close-DRlspKs3.js";import{n as r}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{c as t,g as n}from"./_commonjsHelpers-B3K3fdV-.js";const s=r({name:"AppSearch",props:{value:{type:String,required:!0},disableAndEmitLeftRight:{type:Boolean,default:!1}},emits:["input","enter","blur","focus","up","down","left","right"],methods:{clear(){this.$emit("input",""),this.focus()},clearAndBlur(){this.$emit("input",""),this.$refs.search.blur()},focus(){this.$refs.search.focus()},select(){this.$refs.search.select()},onFocus(){this.$emit("focus")},onBlur(){this.$emit("blur")},stopAndPreventLeftRight(e,r){this.disableAndEmitLeftRight&&(e.preventDefault(),e.stopPropagation(),this.$emit(r))}}},(function(){var r=this,t=r._self._c;return t("div",{staticClass:"app-search search-wrapper"},[t("span",{staticClass:"input-wrapper"},[t("i",{staticClass:"icon icon-search"}),r.value.length?t("span",{staticClass:"icon-clear-wrapper",on:{click:r.clear}},[t("inline-svg",{staticClass:"icon icon-clear",attrs:{src:e}})],1):r._e(),t("input",{ref:"search",staticClass:"search-input",attrs:{type:"text",name:"search","data-test":"search-input",placeholder:"Search",autocomplete:"off"},domProps:{value:r.value},on:{input:function(e){return r.$emit("input",e.target.value)},keydown:[function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"enter",13,e.key,"Enter")?null:r.$emit("enter")},function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.stopPropagation(),e.preventDefault(),r.$emit("up"))},function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.stopPropagation(),e.preventDefault(),r.$emit("down"))},function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:r.stopAndPreventLeftRight(e,"left")},function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:r.stopAndPreventLeftRight(e,"right")}],keyup:function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),r.clearAndBlur.apply(null,arguments))},focus:r.onFocus,blur:r.onBlur}})])])}),[],!1,null,"fa58683e").exports;var o,i,a,l,f={exports:{}};const c=n((o||(o=1,a=t,l=e=>{var r=e=>{"number"==typeof e?e=""+e:"string"!=typeof e&&(e="");var r=d(e);return s(e,{_targetLower:r._lower,_targetLowerCodes:r.lowerCodes,_bitflags:r.bitflags})};class t{get indexes(){return this._indexes.slice(0,this._indexes.len).sort(((e,r)=>e-r))}set indexes(e){return this._indexes=e}highlight(e,r){return((e,r="<b>",t="</b>")=>{for(var n="function"==typeof r?r:void 0,s=e.target,o=s.length,i=e.indexes,a="",l=0,f=0,c=!1,u=[],p=0;p<o;++p){var g=s[p];if(i[f]===p){if(++f,c||(c=!0,n?(u.push(a),a=""):a+=r),f===i.length){n?(a+=g,u.push(n(a,l++)),a="",u.push(s.substr(p+1))):a+=g+t+s.substr(p+1);break}}else c&&(c=!1,n?(u.push(n(a,l++)),a=""):a+=t);a+=g}return n?u:a})(this,e,r)}get score(){return o(this._score)}set score(e){this._score=i(e)}}class n extends Array{get score(){return o(this._score)}set score(e){this._score=i(e)}}var s=(e,r)=>{const n=new t;return n.target=e,n.obj=r.obj??E,n._score=r._score??B,n._indexes=r._indexes??[],n._targetLower=r._targetLower??"",n._targetLowerCodes=r._targetLowerCodes??E,n._nextBeginningIndexes=r._nextBeginningIndexes??E,n._bitflags=r._bitflags??0,n},o=e=>e===B?0:e>1?e:Math.E**(-2*((1-e)**.04307-1)),i=e=>0===e?B:e>1?e:1-Math.pow(Math.log(e)/-2+1,1/.04307),a=e=>{"number"==typeof e?e=""+e:"string"!=typeof e&&(e=""),e=e.trim();var r=d(e),t=[];if(r.containsSpace){var n=e.split(/\s+/);n=[...new Set(n)];for(var s=0;s<n.length;s++)if(""!==n[s]){var o=d(n[s]);t.push({lowerCodes:o.lowerCodes,_lower:n[s].toLowerCase(),containsSpace:!1})}}return{lowerCodes:r.lowerCodes,_lower:r._lower,containsSpace:r.containsSpace,bitflags:r.bitflags,spaceSearches:t}},l=e=>{if(e.length>999)return r(e);var t=h.get(e);return void 0!==t||(t=r(e),h.set(e,t)),t},f=e=>{if(e.length>999)return a(e);var r=v.get(e);return void 0!==r||(r=a(e),v.set(e,r)),r},c=(e,r)=>{var t=[];t.total=e.length;var o=(null==r?void 0:r.limit)||S;if(null==r?void 0:r.key)for(var i=0;i<e.length;i++){var a=e[i];if((p=A(a,r.key))!=E){L(p)||(p=l(p));var f=s(p.target,{_score:p._score,obj:a});if(t.push(f),t.length>=o)return t}}else if(null==r?void 0:r.keys)for(i=0;i<e.length;i++){a=e[i];for(var c=new n(r.keys.length),u=r.keys.length-1;u>=0;--u)(p=A(a,r.keys[u]))?(L(p)||(p=l(p)),p._score=B,p._indexes.len=0,c[u]=p):c[u]=O;if(c.obj=a,c._score=B,t.push(c),t.length>=o)return t}else for(i=0;i<e.length;i++){var p;if((p=e[i])!=E&&(L(p)||(p=l(p)),p._score=B,p._indexes.len=0,t.push(p),t.length>=o))return t}return t},u=(e,r,n=!1,s=!1)=>{if(!1===n&&e.containsSpace)return p(e,r,s);for(var o=e._lower,i=e.lowerCodes,a=i[0],l=r._targetLowerCodes,f=i.length,c=l.length,u=0,g=0,d=0;;){if(a===l[g]){if(x[d++]=g,++u===f)break;a=i[u]}if(++g>=c)return E}u=0;var h=!1,v=0,w=r._nextBeginningIndexes;w===E&&(w=r._nextBeginningIndexes=_(r.target));var k=0;if((g=0===x[0]?0:w[x[0]-1])!==c)for(;;)if(g>=c){if(u<=0)break;if(++k>200)break;--u;var b=y[--v];g=w[b]}else if(i[u]===l[g]){if(y[v++]=g,++u===f){h=!0;break}++g}else g=w[g];var m=f<=1?-1:r._targetLower.indexOf(o,x[0]),C=!!~m,A=!!C&&(0===m||r._nextBeginningIndexes[m-1]===m);if(C&&!A)for(var L=0;L<w.length;L=w[L])if(!(L<=m)){for(var S=0;S<f&&i[S]===r._targetLowerCodes[L+S];S++);if(S===f){m=L,A=!0;break}}var B=e=>{for(var r=0,t=0,n=1;n<f;++n)e[n]-e[n-1]!=1&&(r-=e[n],++t);if(r-=(e[f-1]-e[0]-(f-1)+12)*t,0!==e[0]&&(r-=e[0]*e[0]*.2),h){var s=1;for(n=w[0];n<c;n=w[n])++s;s>24&&(r*=10*(s-24))}else r*=1e3;return r-=(c-f)/2,C&&(r/=1+f*f*1),A&&(r/=1+f*f*1),r-=(c-f)/2};if(h)if(A){for(L=0;L<f;++L)x[L]=m+L;$=x,j=B(x)}else $=y,j=B(y);else{if(C)for(var L=0;L<f;++L)x[L]=m+L;var $,j=B($=x)}for(r._score=j,L=0;L<f;++L)r._indexes[L]=$[L];r._indexes.len=f;const I=new t;return I.target=r.target,I._score=r._score,I._indexes=r._indexes,I},p=(e,r,t)=>{for(var n=new Set,s=0,o=E,i=0,a=e.spaceSearches,l=a.length,f=0,c=()=>{for(let e=f-1;e>=0;e--)r._nextBeginningIndexes[w[2*e+0]]=w[2*e+1]},p=!1,g=0;g<l;++g){b[g]=B;var d=a[g];if(o=u(d,r),t){if(o===E)continue;p=!0}else if(o===E)return c(),E;if(g!==l-1){var _=o._indexes,h=!0;for(let e=0;e<_.len-1;e++)if(_[e+1]-_[e]!=1){h=!1;break}if(h){var v=_[_.len-1]+1,x=r._nextBeginningIndexes[v-1];for(let e=v-1;e>=0&&x===r._nextBeginningIndexes[e];e--)r._nextBeginningIndexes[e]=v,w[2*f+0]=e,w[2*f+1]=x,f++}}s+=o._score/l,b[g]=o._score/l,o._indexes[0]<i&&(s-=2*(i-o._indexes[0])),i=o._indexes[0];for(var y=0;y<o._indexes.len;++y)n.add(o._indexes[y])}if(t&&!p)return E;c();var k=u(e,r,!0);if(k!==E&&k._score>s){if(t)for(g=0;g<l;++g)b[g]=k._score/l;return k}t&&(o=r),o._score=s,g=0;for(let u of n)o._indexes[g++]=u;return o._indexes.len=g,o},g=e=>e.replace(new RegExp("\\p{Script=Latin}+","gu"),(e=>e.normalize("NFD"))).replace(/[\u0300-\u036f]/g,""),d=e=>{for(var r=(e=g(e)).length,t=e.toLowerCase(),n=[],s=0,o=!1,i=0;i<r;++i){var a=n[i]=t.charCodeAt(i);32!==a?s|=1<<(a>=97&&a<=122?a-97:a>=48&&a<=57?26:a<=127?30:31):o=!0}return{lowerCodes:n,bitflags:s,containsSpace:o,_lower:t}},_=e=>{for(var r=(e=g(e)).length,t=(e=>{for(var r=e.length,t=[],n=0,s=!1,o=!1,i=0;i<r;++i){var a=e.charCodeAt(i),l=a>=65&&a<=90,f=l||a>=97&&a<=122||a>=48&&a<=57,c=l&&!s||!o||!f;s=l,o=f,c&&(t[n++]=i)}return t})(e),n=[],s=t[0],o=0,i=0;i<r;++i)s>i?n[i]=s:(s=t[++o],n[i]=void 0===s?r:s);return n},h=new Map,v=new Map,x=[],y=[],w=[],k=[],b=[],m=[],C=[],A=(e,r)=>{var t=e[r];if(void 0!==t)return t;if("function"==typeof r)return r(e);var n=r;Array.isArray(r)||(n=r.split("."));for(var s=n.length,o=-1;e&&++o<s;)e=e[n[o]];return e},L=e=>"object"==typeof e&&"number"==typeof e._bitflags,S=1/0,B=-S,$=[];$.total=0;var j,I,P,R,E=null,O=r(""),D=(j=[],I=0,R=e=>{for(var r=0,t=j[r],n=1;n<I;){var s=n+1;r=n,s<I&&j[s]._score<j[n]._score&&(r=s),j[r-1>>1]=j[r],n=1+(r<<1)}for(var o=r-1>>1;r>0&&t._score<j[o]._score;o=(r=o)-1>>1)j[r]=j[o];j[r]=t},(P={}).add=e=>{var r=I;j[I++]=e;for(var t=r-1>>1;r>0&&e._score<j[t]._score;t=(r=t)-1>>1)j[r]=j[t];j[r]=e},P.poll=e=>{if(0!==I){var r=j[0];return j[0]=j[--I],R(),r}},P.peek=e=>{if(0!==I)return j[0]},P.replaceTop=e=>{j[0]=e,R()},P);return{single:(e,r)=>{if(!e||!r)return E;var t=f(e);L(r)||(r=l(r));var n=t.bitflags;return(n&r._bitflags)!==n?E:u(t,r)},go:(e,r,t)=>{if(!e)return(null==t?void 0:t.all)?c(r,t):$;var s=f(e),o=s.bitflags,a=s.containsSpace,p=i((null==t?void 0:t.threshold)||0),g=(null==t?void 0:t.limit)||S,d=0,_=0,h=r.length;function v(e){d<g?(D.add(e),++d):(++_,e._score>D.peek()._score&&D.replaceTop(e))}if(null==t?void 0:t.key)for(var x=t.key,y=0;y<h;++y){var w=r[y];(T=A(w,x))&&(L(T)||(T=l(T)),(o&T._bitflags)===o&&(q=u(s,T))!==E&&(q._score<p||(q.obj=w,v(q))))}else if(null==t?void 0:t.keys){var j=t.keys,I=j.length;e:for(y=0;y<h;++y){w=r[y];for(var P=0,R=0;R<I;++R)x=j[R],(T=A(w,x))?(L(T)||(T=l(T)),m[R]=T,P|=T._bitflags):m[R]=O;if((o&P)===o){if(a)for(let e=0;e<s.spaceSearches.length;e++)k[e]=B;for(R=0;R<I;++R)if((T=m[R])!==O)if(C[R]=u(s,T,!1,a),C[R]!==E){if(a)for(let e=0;e<s.spaceSearches.length;e++)b[e]>-1e3&&k[e]>B&&(U=(k[e]+b[e])/4)>k[e]&&(k[e]=U),b[e]>k[e]&&(k[e]=b[e])}else C[R]=O;else C[R]=O;if(a){for(let e=0;e<s.spaceSearches.length;e++)if(k[e]===B)continue e}else{var F=!1;for(let e=0;e<I;e++)if(C[e]._score!==B){F=!0;break}if(!F)continue}var M=new n(I);for(let e=0;e<I;e++)M[e]=C[e];if(a){var z=0;for(let e=0;e<s.spaceSearches.length;e++)z+=k[e]}else{z=B;for(let e=0;e<I;e++){var U;(q=M[e])._score>-1e3&&z>B&&(U=(z+q._score)/4)>z&&(z=U),q._score>z&&(z=q._score)}}if(M.obj=w,M._score=z,null==t?void 0:t.scoreFn){if(!(z=t.scoreFn(M)))continue;z=i(z),M._score=z}z<p||v(M)}}}else for(y=0;y<h;++y){var T,q;(T=r[y])&&(L(T)||(T=l(T)),(o&T._bitflags)===o&&(q=u(s,T))!==E&&(q._score<p||v(q)))}if(0===d)return $;var H=new Array(d);for(y=d-1;y>=0;--y)H[y]=D.poll();return H.total=d+_,H},prepare:r,cleanup:()=>{h.clear(),v.clear()}}},(i=f).exports?i.exports=l():a.fuzzysort=l()),f.exports));export{s as A,c as f};