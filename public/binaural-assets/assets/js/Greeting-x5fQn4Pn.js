import{M as t}from"./Message-DIyUGK15.js";import{u as e}from"./useAllComponentsMounted-VdWDSwjD.js";import{persistent as a}from"./reactiveCustomization-CEUTOUc3.js";import{T as o}from"./index-CypNqh9b.js";import{s}from"./showAnyway-8ON2gVJd.js";import{c as r,d as i,n,A as p}from"./dynamic-import-helper-CTnsj-vI.js";import{a as d}from"./modal-qMFaWR5h.js";import{U as l}from"./enums-1c3kgXdw.js";import{B as g}from"./BaseDropdown-CB3yfeIu.js";import{B as c}from"./BaseDropdownOption-tB3ldrjh.js";import{B as u}from"./BaseDropdownDivider-Bay0Demn.js";import h from"./BaseIcon-BW2ar6VN.js";import{n as j}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./MobileBlur-B2s9dLKD.js";import"./VueBase-C55TLWt3.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-B4IAWUO-.js";import"./portal-vue.esm-DdddSpdW.js";import"./array-YYQw31d9.js";import"./style-D-IRYiWS.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./localStorage-B4mFdj8F.js";import"./legacyUserMigration-CaazFMYU.js";import"./migrateLegacyUserMessageHandler-CZ8nZZlg.js";import"./auth-BwdMrzFn.js";import"./persistStore-BDYPfxbs.js";import"./embeddedApp-Bd9r3bdf.js";import"./experiments-6paecGsK.js";import"./flashMessageQueue-C7gl3k6c.js";import"./info-DdD9a7JK.js";import"./constants-Bt_TxKWw.js";import"./index-DHG7crjO.js";import"./appZStack-Zxx-wHpo.js";import"./ResizeSensor-ZXOsDHeC.js";import"./promisifiedChrome-vBWwQWBS.js";import"./modal-BWwnzHDf.js";import"./BaseDropdownContent-C68ik0op.js";import"./constants-CALDQiUE.js";import"./index-998LMmMn.js";import"./icon-ellipsis-D7nTOXaQ.js";const w=j({name:"Greeting",components:{BaseIcon:h,BaseDropdownDivider:u,BaseDropdownOption:c,BaseDropdown:g,ThreeColLayout:o,Message:t},setup:()=>({...e(),mantraManager:m.models.mantraManager,showAnyway:s,dropdown:r()}),data:()=>({editingName:!1}),computed:{date:()=>m.models.date,name:()=>(a.displayname||"").trim(),greeting(){const t=i.getDayPart(this.date.get("date"));let e={name:this.name,punctuation:i.endsWithEndPunctuation(this.name)?"":"."};return e.content=this.name||this.editingName?`Good ${t}, `:`Good ${t}`,e}},mounted(){n.$on("greeting:name:edit",(()=>this.editing(!0)))},destroyed(){n.$off("greeting:name:edit",(()=>this.editing(!0)))},methods:{toggleDropdown(t){var e;this.$emit("stop-cycle",t),null==(e=this.dropdown)||e.openDropdown()},showMantra(){var t;!this.mantraManager.noMantra||this.$plus?(this.mantraManager.isEnabled()&&!this.mantraManager.getActiveItem()?this.mantraManager.getActiveItem():this.mantraManager.isEnabled()||this.mantraManager.getActiveItem()?this.mantraManager.isEnabled()&&this.mantraManager.getActiveItem()&&this.$emit("show-mantra"):(this.mantraManager.toggleEnabled(),this.mantraManager.getActiveItem()),null==(t=this.dropdown)||t.closeDropdown(),p.capture("mantra show",{feature:"mantras"})):d(l.MANTRAS,"dash")},editing(t){var e;this.$emit("stop-cycle",t),this.editingName=t,null==(e=this.dropdown)||e.closeDropdown()},onEditNameClick(){this.editing(!0),p.capture("display name change",{feature:"profile"})}}},(function(){var t=this,e=t._self._c;return e("three-col-layout",{directives:[{name:"mobile-click",rawName:"v-mobile-click",value:t.toggleDropdown.bind(null,!0),expression:"toggleDropdown.bind(null, true)"}],staticClass:"app-container has-dash-icon greeting",class:{"show-anyway":t.showAnyway.includes("greeting")},attrs:{"data-show-anyway":"greeting","data-test":"greeting"},scopedSlots:t._u([{key:"center",fn:function(){return[e("message",{attrs:{message:t.greeting,"editing-name":t.editingName},on:{editing:t.editing,toggle:t.toggleDropdown}})]},proxy:!0},{key:"right",fn:function(){return[e("base-dropdown",{ref:"dropdown",attrs:{"container-class":"dash","data-test":"more-toggle"},scopedSlots:t._u([{key:"toggle",fn:function(){return[e("div",{staticClass:"icon-wrapper dark dark-full"},[e("base-icon",{staticClass:"icon",attrs:{src:"icon-ellipsis",size:"18px"}})],1)]},proxy:!0}])},[e("base-dropdown-option",{attrs:{"data-test":"show-mantra"},on:{click:t.showMantra}},[e("base-icon",{attrs:{src:"message-square-quote"}}),e("span",[t._v("Show today's mantra")])],1),e("base-dropdown-divider"),e("base-dropdown-option",{attrs:{"data-test":"edit-name"},on:{click:function(e){return e.stopPropagation(),t.onEditNameClick.apply(null,arguments)}}},[e("base-icon",{attrs:{src:"pencil"}}),e("span",[t._v("Edit your name")])],1)],1)]},proxy:!0}])})}),[],!1,null,"7aa3b34b").exports;export{w as default};