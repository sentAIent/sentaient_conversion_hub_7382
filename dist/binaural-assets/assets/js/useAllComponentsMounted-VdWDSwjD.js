import{m as e,x as o,y as t,z as n,n as s,B as i,C as a,w as d,E as r}from"./dynamic-import-helper-CTnsj-vI.js";const c=({widgetId:c,onAllComponentsMountedOverride:u}={})=>{var p;const l=e({}),$=o(),f=null==(p=t())?void 0:p.proxy;if(!f)throw new Error("[useAllComponentsMounted]: Component instance not found!");const y=f.$options.components??{};Object.keys(y).forEach((e=>{const o=y[e];"function"==typeof o&&(y[e]=function(...t){n(l,e,!1);const a=`${e}:${$}:mounted`,d=()=>{n(l,e,!0)};return s.$once(a,d),o(t).then((o=>{const t=o.default;return t&&t.doNotWaitForMount&&(i(l,e),s.$off(a,d)),o}))}.bind(f))}));const w=()=>{s.$off("widgets:timeoutExceeded",h)},g=()=>{var e;s.$emit(`${f.$options.name}:${(null==(e=f.$vnode.context)?void 0:e.uid)||""}:mounted`)},v=()=>{u?u.apply(f):c?m.widgetManager.appReady(c):g(),w()},h=()=>{const e=Object.keys(l).filter((e=>!l[e]));e.length&&console.warn(`${f.$options.name} is awaiting ${e.join(", ")} to mount.`)};return s.$on("widgets:timeoutExceeded",h),a((()=>{if(Object.keys(l).length){const e=d(l,(o=>{Object.values(o).every((e=>e))&&(v(),e())}),{deep:!0,immediate:!0})}else v()})),r((()=>{w()})),{uid:$,emitComponentMounted:g}};export{c as u};