import{aa as t,e,ab as o}from"./dynamic-import-helper-CTnsj-vI.js";import{loadTodoAddin as a}from"./addin-CPXlL2UQ.js";import"./array-YYQw31d9.js";import"./style-D-IRYiWS.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./modal-qMFaWR5h.js";import"./enums-1c3kgXdw.js";import"./tasksViewState-qOrGChOD.js";import"./ViewState-DH0LvQYq.js";import"./appZStack-Zxx-wHpo.js";import"./handlebarLoader-xbtIzd6B.js";const r=t(""),s=e("todoStats",{state:()=>({loaded:!1}),getters:{todoCompletedSince(){return t=>{if(!this.loaded)return 0;if(r.value)return 0;const e=localStorage.getItem("todolist-1");if(!e)return 0;const o=e.split(",").reduce(((t,e)=>Object.assign(t,(t=>{const e=localStorage.getItem(t),o={};return e?(e.split(",").forEach((e=>{o[e]=localStorage.getObject(`${t}-${e}`)})),o):o})("todo-"+e))),{});return Object.values(o).filter((e=>e.done&&new Date(e.completedDate).getTime()>t)).length}},unsupportedMetrics:()=>r.value?["todoCompletedSince"]:[]},actions:{refresh(){(async()=>{await a();const t=m.views.todoPane,e=(await t.manager.getMomoLists()).getListOfType("done"),s=()=>t.todoList.model.activeProvider.get("provider_url");m.on("todo:providerChanged",(()=>{null==e||e.doFetchIfNeeded(!0),r.value=s()})),m.on("todo:loadingStateChange",(()=>o(r))),s()||null==e||e.doFetchIfNeeded(),r.value=s(),this.loaded=!0})()}}}),i=()=>s();export{i as default};