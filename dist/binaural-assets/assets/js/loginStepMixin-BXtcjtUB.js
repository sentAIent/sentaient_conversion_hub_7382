import{S as t}from"./SmoothReflow-QsxkeVSi.js";import s from"./icon-next-CI-_n-sg.js";import{n as e}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{d as a,R as i,a7 as o}from"./dynamic-import-helper-CTnsj-vI.js";const n=e({name:"LoginLayout",components:{SmoothReflow:t},props:{loading:{type:Boolean,default:!1},continueButtonWrapperVisible:{type:Boolean,default:!0}},methods:{hasMessage(){var t,s,e;const a=null==(s=(t=this.$scopedSlots).message)?void 0:s.call(t)[0];return!!a&&(!!a.context||!!(null==(e=a.text)?void 0:e.replaceAll("\t","").replaceAll("\n","")))}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-layout dark-full"},[e("div",{staticClass:"login-top"},[e("div",{staticClass:"actions-top-left"},[t._t("actions-top-left")],2),e("img",{staticClass:"logo",attrs:{src:"/img/logo-white.svg"}}),e("div",{staticClass:"actions-top-right"},[t._t("actions-top-right")],2)]),e("div",{staticClass:"login-middle u--scrim"},[e("div",{staticClass:"login-middle-wrapper"},[e("div",{staticClass:"above"},[e("div",{staticClass:"title"},[t._t("title")],2)]),e("div",{staticClass:"prompt"},[e("span",{staticClass:"question",attrs:{"data-test":"question"}},[t._t("question")],2),t._t("input")],2),e("div",{staticClass:"below"},[e("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t.loading?e("div",{key:"1",staticClass:"below-input-msg loading",attrs:{"data-test":"loading-state"}},[e("span",{staticClass:"loading-icon"}),t._v(" Loading... ")]):e("div",{key:"2",staticClass:"below-input"},[e("smooth-reflow",{attrs:{duration:500}},[t.hasMessage()?e("div",{staticClass:"below-input-msg tip",attrs:{"data-test":"message"}},[t._t("message")],2):t._e()]),t._t("below-message"),e("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t._t("continue-button",(function(){return[e("div",{staticClass:"continue-button-wrapper"},[t._t("alt-continue-button"),e("button",{staticClass:"dash-button",attrs:{"data-test":"continue-button"},on:{click:function(s){return s.stopPropagation(),t.$emit("submit")}}},[t._t("continue-message",(function(){return[t._v(" Continue "),e("inline-svg",{staticClass:"icon icon-next",attrs:{src:s}})]}))],2)],2)]}))],2),t._t("below-continue")],2)])],1)])]),e("div",{staticClass:"login-bottom"},[e("div",{staticClass:"login-bottom-wrapper"},[t._t("bottom")],2),e("div",{staticClass:"scrim"})])])}),[],!1,null,"019d038d").exports,l={props:{loading:{type:Boolean,required:!0},name:{type:String,required:!0},email:{type:String,required:!0}},data:()=>({message:""}),computed:{computedMessage(){return this.message.replace("{email}",a.removeTags(this.email))}},mounted(){window.addEventListener("keyup",this.onKeyUp)},destroyed(){window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyUp(t){var s,e;"Enter"===t.key&&(null==(s=this.onEnter)||s.call(this)),"Escape"===t.key&&(null==(e=this.onEscape)||e.call(this))},async setLoadingWithErrorHandling(t,s={focusOnError:!0}){var e;const a=()=>this.$emit("update:loading",!1);if(!this.loading){this.resetMessage();try{this.$emit("update:loading",!0),await t(a)}catch(n){this.message=n instanceof i?n.message:o.SERVER_ERROR_GENERAL,a(),(null==s?void 0:s.focusOnError)&&(null==(e=this.$refs["login-input"])||e.focus())}}},resetMessage(){this.message=""}}};export{n as L,l};