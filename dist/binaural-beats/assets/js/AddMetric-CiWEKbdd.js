const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/FocusModeInsightsApp-BUedgl5r.js","assets/js/dynamic-import-helper-CTnsj-vI.js","assets/js/array-YYQw31d9.js","assets/js/style-D-IRYiWS.js","assets/css/style-6nm_MYpP.css","assets/js/Logger-cMW5At62.js","assets/js/string-BBKP9xfj.js","assets/js/AppPopup-D21ZzXTp.js","assets/js/ResizeSensor-ZXOsDHeC.js","assets/js/globalKeyEventManager-C6pBx38h.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/AppPopup-DUjVA79X.css","assets/js/AppViewSwitchDynamic-ChSgUDaf.js","assets/js/SmoothReflow-QsxkeVSi.js","assets/js/useAllComponentsMounted-VdWDSwjD.js","assets/css/SmoothReflow-DzJ-QC-5.css","assets/js/appViewSwitchMixin-BsLJ76Hr.js","assets/css/AppViewSwitchDynamic-nwV8-yjr.css","assets/js/BaseDropdown-CB3yfeIu.js","assets/js/BaseDropdownContent-C68ik0op.js","assets/js/constants-CALDQiUE.js","assets/js/index-998LMmMn.js","assets/css/BaseDropdownContent-DKsGy_8Z.css","assets/js/portal-vue.esm-DdddSpdW.js","assets/js/icon-ellipsis-D7nTOXaQ.js","assets/css/BaseDropdown-CwtM7hMN.css","assets/js/AppView-BMGOOodE.js","assets/css/AppView-CsYj23U-.css","assets/js/AppHeader-A32plZRR.js","assets/js/AppHeaderControl-kJjUFX4q.js","assets/css/AppHeaderControl-BU4A7Xbx.css","assets/js/constants-BfBD_H-d.js","assets/js/icon-close-DRlspKs3.js","assets/css/AppHeader-Cslc5PS9.css","assets/js/BaseIcon-BW2ar6VN.js","assets/css/BaseIcon-CPmL0n7V.css","assets/js/BaseDropdownOption-tB3ldrjh.js","assets/css/BaseDropdownOption-DaYMTb1b.css","assets/js/focusModeInsightsViewState-f77ETMNP.js","assets/js/ViewState-DH0LvQYq.js","assets/js/appZStack-Zxx-wHpo.js","assets/js/OverflowCarousel-d3_FiDF1.js","assets/js/constants-BpVlFj04.js","assets/js/icon-next-CI-_n-sg.js","assets/css/OverflowCarousel-eEMC8kQU.css","assets/js/reactiveCustomization-CEUTOUc3.js","assets/js/VueBase-C55TLWt3.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/pinia-B4IAWUO-.js","assets/js/pomodoroCompleted-B2E_m1QL.js","assets/js/persistStore-BDYPfxbs.js","assets/js/focusModeState-BPyBLUbE.js","assets/js/LocalStorageStoreSyncedItem-DMdfjgsv.js","assets/js/PomodoroTimers-CyrfcuWH.js","assets/js/promisifiedChrome-vBWwQWBS.js","assets/js/login-HJtMK9QU.js","assets/js/authService-UjcjSrh8.js","assets/js/auth-BwdMrzFn.js","assets/js/legacyUserMigration-CaazFMYU.js","assets/js/enums-1c3kgXdw.js","assets/js/migrateLegacyUserMessageHandler-CZ8nZZlg.js","assets/js/onboarding-B35lV45t.js","assets/js/modal-qMFaWR5h.js","assets/js/v-style-DxUun1f4.js","assets/js/internalDataMetrics-CHi96UKS.js","assets/js/focusModeHelpers-tDECULZC.js","assets/js/TimeframeService-DOKcTq-5.js","assets/js/streaks-C-_kXOaw.js","assets/js/BaseForm-BjqauXKF.js","assets/js/FormMessage-D8y-6rLo.js","assets/js/icon-alert-BikrS7AG.js","assets/css/FormMessage-BcXv0ZVT.css","assets/css/BaseForm-CdgC6Psc.css","assets/js/AppConfirmCancel-Dbtq22vw.js","assets/css/AppConfirmCancel-DbaOXcDd.css","assets/js/FormToggle-CRXN1Mz8.js","assets/js/FormFieldWrapper-BVlpMs4u.js","assets/css/FormFieldWrapper-Bg7cTjMQ.css","assets/js/ToggleSwitch-BMo4SbmD.js","assets/css/ToggleSwitch-CTfmYf-M.css","assets/css/FormToggle-DUKt37kY.css","assets/js/FormInput-EzoeJ62n.js","assets/js/SoftFocus-BUhesXB-.js","assets/js/compareObjects-R6Hcs7xe.js","assets/js/AppLoading-DWsYUtJy.js","assets/css/AppLoading-DHYBGgbD.css","assets/js/InlineNumberInput-jCUP0XJ2.js","assets/css/InlineNumberInput-D0yp2QxM.css","assets/js/CircleIndicator-D90MQjfF.js","assets/css/CircleIndicator-DucGE1qd.css","assets/css/FocusModeInsightsApp-DMIpTFS3.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./style-D-IRYiWS.js";import{u as t}from"./useAllComponentsMounted-VdWDSwjD.js";import{O as s,j as i,r as o,f as a,n as r,A as p,$ as n,a9 as c}from"./dynamic-import-helper-CTnsj-vI.js";import{a as d}from"./appZStack-Zxx-wHpo.js";import l from"./icon-confetti-BvRSomF2.js";import{u}from"./internalDataMetrics-CHi96UKS.js";import{g as h}from"./focusModeHelpers-tDECULZC.js";import{u as g}from"./useAppToggle-eFKNFaJS.js";import{u as f}from"./focusModeInsightsViewState-f77ETMNP.js";import{C as A}from"./CircleIndicator-D90MQjfF.js";import{d as v,L as M}from"./focusModeState-BPyBLUbE.js";import{A as _}from"./AppDash-Ic_PCFf2.js";import{n as w}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{computed as b}from"./reactiveCustomization-CEUTOUc3.js";import{a as y}from"./modal-qMFaWR5h.js";import{b as C}from"./constants-BfBD_H-d.js";import I from"./BaseIcon-BW2ar6VN.js";import D from"./AppContainer-BFIQ2qhm.js";import{B as j}from"./BaseMetric-ClLQP9bU.js";import{U as S}from"./enums-1c3kgXdw.js";const V=new p({feature:"focus-mode-insights"});const k=w(s({name:"FocusModeMetric",components:{AppDash:_,FocusModeInsightsApp:()=>e((()=>import("./FocusModeInsightsApp-BUedgl5r.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91])),CircleIndicator:A},setup:()=>({...g(f,{analytics:V}),internalDataMetrics:u()}),computed:{timeFocusedFriendlyStringMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","today")},timeFocusedFriendlyString(){return this.timeFocusedFriendlyStringMetric.value.getterValue||"-"},goalDays(){return this.settings.goalDays},goalEnabled(){return this.settings.goalEnabled},goalMinutes(){return this.settings.goalMinutes},todayMinutesMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","todayMinutes")},indicatorProgress(){if(null===this.todayMinutesMetric.value.getterValue||!this.todayMinutesMetric.value.storeLoaded)return 0;const e=this.todayMinutesMetric.value.getterValue;return Math.max(Math.min(e,this.goalMinutes),0)/this.goalMinutes},circleIndicatorVisible(){return!!this.goalEnabled&&this.goalDays.includes(i())},canShowNotification(){return 1===this.indicatorProgress&&o.tabVisible&&this.circleIndicatorVisible&&v.currentValue},settings:()=>h()},watch:{async canShowNotification(e){if(!e)return;const t=localStorage.getItem(M);t&&a(new Date(Number(t)))===a(new Date)||(this.setLastShowDateIfCompleted(),r.$emit("flashMessage",{message:"Focus Goal completed!",icon:l,persist:5e3,confetti:!0}))},goalMinutes(e,t){t>0&&e>0&&e!==t&&1!==this.indicatorProgress&&localStorage.removeItem(M)}},mounted(){m.on("focusInsights:toggle",this.togglePopup),m.on("focusMode:starting",this.setLastShowDateIfCompleted)},destroyed(){m.off("focusInsights:toggle",this.togglePopup),m.off("focusMode:starting",this.setLastShowDateIfCompleted)},methods:{setLastShowDateIfCompleted(){1===this.indicatorProgress&&localStorage.setItem(M,`${Date.now()}`)},triggerAppOpenEvent(){m.trigger("focusInsightsApp:opened")},triggerAppCloseEvent(){m.trigger("focusInsightsApp:closed")}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closePopup,expression:"closePopup"}],staticClass:"focus-mode-metric"},[t("app-dash",{attrs:{label:"Focused Today","app-visible":e.popupActive,"blur-background-hover":!0,"data-test":"focus-mode-insight"},on:{click:e.togglePopupAndCaptureIfOpen},scopedSlots:e._u([{key:"icon",fn:function(){return[e.circleIndicatorVisible?t("circle-indicator",{attrs:{progress:e.indicatorProgress,"data-test":"circle-indicator-svg","data-circle-progress":e.indicatorProgress}}):e._e()]},proxy:!0},{key:"icon-right",fn:function(){return[t("span",{attrs:{"data-test":"time-focused-string"}},[e._v(e._s(e.timeFocusedFriendlyString))])]},proxy:!0}])}),t("transition",{attrs:{name:"slide-down-fade"},on:{"after-enter":e.triggerAppOpenEvent,"after-leave":e.triggerAppCloseEvent}},[e.popupActive?t("focus-mode-insights-app",{on:{close:e.togglePopupAndCaptureIfOpen}}):e._e()],1)],1)}),[],!1,null,"867a1fd2").exports,P={[j.Clock]:{name:"World Clock",icon:"icon/apps/clocks",upsellId:S.WORLD_CLOCKS},[j.Countdown]:{name:"Countdown",icon:"icon/apps/countdowns",upsellId:S.COUNTDOWNS},[j.Metric]:{name:"Metric",icon:"icon/apps/metrics",upsellId:S.METRICS}},x=new p({feature:"meta add"}),O=s({name:"AddMetric",components:{AppView:()=>e((()=>import("./AppView-BMGOOodE.js")),__vite__mapDeps([26,10,27])),AppHeader:()=>e((()=>import("./AppHeader-A32plZRR.js")),__vite__mapDeps([28,29,10,30,31,32,33])),AppContainer:D,BaseIcon:I,AppDash:_,AppPopup:()=>e((()=>import("./AppPopup-D21ZzXTp.js")),__vite__mapDeps([7,8,9,1,2,3,4,5,6,10,11])),FocusModeMetric:k},props:{disable:{type:Boolean,default:!1},forceActive:{type:Boolean,default:!1}},emits:["add"],setup:()=>({...t({widgetId:"addMetric"}),AddMetricTypeData:P}),data:()=>({popupActive:!1}),computed:{focused:{get:()=>d.isOnTop("addMetric"),set(e){e?d.add("addMetric"):d.remove("addMetric")}},focusModeInsightVisible(){return b.focusInsightVisible&&!this.$plus&&!n()},showLabel:()=>b.dashAppTextLabels===C.Always,weatherOrCalendarVisible:()=>b.weatherVisible||b.calendarVisible,weatherDashAppWidth:()=>b.weatherVisible?o.weatherDashAppWidth:0,calendarDashAppWidth:()=>b.calendarVisible?o.calendarDashAppWidth:0},methods:{add(e,t){this.$plus?(this.closeApp(),this.$emit("add",e)):y(t,"dash")},toggleApp(){this.popupActive?this.closeApp():this.showApp()},showApp(){this.disable||(this.popupActive=!0,this.focused=!0,x.capture("meta add click"))},closeApp(){this.popupActive&&(this.popupActive=!1,this.focused=!1)}}}),E=()=>{c(((e,t)=>({c0b29e8c:e.weatherDashAppWidth,"5f492d46":e.calendarDashAppWidth})))},F=O.setup;O.setup=F?(e,t)=>(E(),F(e,t)):E;const L=w(O,(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("app-container",{staticClass:"add-metric needs-hover",class:{active:e.popupActive||e.forceActive},attrs:{"app-name":"add-metric"}},[t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeApp,expression:"closeApp"}],staticClass:"add-metric-container"},[t("app-dash",{attrs:{icon:"grid-2x2-plus",label:"Add","app-visible":e.popupActive||e.forceActive,"blur-background-hover":!0,"data-ob":"add-metric","data-test":"add-metric-dash"},on:{click:e.toggleApp}}),t("transition",{attrs:{name:"slide-down-fade"}},[e.popupActive?t("app-popup",{attrs:{position:"bottom-left",region:"top-right",width:420,focused:e.focused},on:{close:function(t){e.popupActive=!1}},nativeOn:{click:function(t){e.focused=!0}}},[t("app-view",{scopedSlots:e._u([{key:"header",fn:function(){return[t("app-header",{on:{close:e.closeApp},scopedSlots:e._u([{key:"left",fn:function(){return[t("base-icon",{staticClass:"app-header-icon",attrs:{src:"grid-2x2-plus",size:"16px"}}),t("span",{staticClass:"app-header-name"},[e._v("Add")])]},proxy:!0}],null,!1,1716665500)})]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"tiles"},e._l(e.AddMetricTypeData,(function(s,i){return t("div",{key:i,staticClass:"tile",attrs:{"data-test":`add-${i}`},on:{click:function(t){return e.add(i,s.upsellId)}}},[t("base-icon",{staticClass:"widget-icon",attrs:{src:s.icon,size:"24px"}}),t("div",{staticClass:"widget-name"},[e._v(e._s(s.name))]),e.$plus?e._e():t("span",{staticClass:"badge badge-plus"},[e._v("Plus")])],1)})),0)]},proxy:!0}],null,!1,2413660523)})],1):e._e()],1)],1),t("transition",{attrs:{name:"fade"}},[e.focusModeInsightVisible?t("focus-mode-metric",{key:"focus-mode-insight"}):e._e()],1),e.weatherOrCalendarVisible&&!e.$plus?t("div",{staticClass:"top-right-dash-measure",class:{labels:e.showLabel}}):e._e()],1)}),[],!1,null,"023e3956").exports;export{L as A,k as F,P as a};