import{O as t,c as e,n as a,q as i}from"./dynamic-import-helper-CTnsj-vI.js";import n from"./BaseIcon-BW2ar6VN.js";import{B as o,a as s}from"./BaseDropdownContent-C68ik0op.js";import{N as l}from"./constants-CALDQiUE.js";import{n as p}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./array-YYQw31d9.js";import"./style-D-IRYiWS.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./index-998LMmMn.js";const r=p(t({name:"Popup",components:{BaseDropdownContent:o,BaseDropdownContainer:s,BaseIcon:n},props:{id:{type:String,required:!0},targetElementSelector:{type:String,required:!0},targetSelectLast:{type:Boolean,default:!1},elementReadyEvent:{type:String,default:""},position:s.props.position,targetDistance:{type:Number,default:-l/2},alignment:s.props.alignment,alignmentOffset:s.props.alignmentOffset,nippleAlignmentOffset:s.props.nippleAlignmentOffset,subHeaderText:{type:String,default:""},headerBadgeText:{type:String,default:""},headerText:{type:String,default:""},bodyText:{type:String,default:""},ctaText:{type:String,default:"Learn moreâ€¦"},ctaCallback:{type:Function,default:null},ctaClasses:{type:String,default:""},ctaIcon:{type:String,default:""},ctaTriggersComplete:{type:Boolean,default:!1},secondaryText:{type:String,default:""},secondaryCallback:{type:Function,default:null},secondaryClasses:{type:String,default:""},secondaryIcon:{type:String,default:""},secondaryTriggersComplete:{type:Boolean,default:!1},hideCallback:{type:Function,default:null},pulseAnimation:{type:Boolean,default:!0},imageUrl:{type:String,default:""},visualIsVideo:{type:Boolean,default:!1},notificationStyling:{type:Object,default:()=>{}},onboardingStyling:{type:Boolean,default:!1},width:{type:Number,default:390},nippleVisible:{type:Boolean,default:!0},onPopupClicked:{type:Function,default:null},hidden:{type:Boolean,default:!0},subStep:{type:Boolean,default:!1},clickOutsideTriggersDismiss:{type:Boolean,default:!1}},setup:()=>({popupDropdown:e()}),data:()=>({popupStyles:{},popupVisible:!1,eventReady:!1}),watch:{hidden:{async handler(){var t;this.hidden||null==(t=this.popupDropdown)||t.onResize()},immediate:!0}},async mounted(){var t;a.$on("popup:hide",this.hidePopup);const e=async()=>{var t,n;this.popupVisible=!0,this.elementReadyEvent&&(a.$off(this.elementReadyEvent,e),null==(t=window.m)||t.off(this.elementReadyEvent,e),this.eventReady=!0),await i(),null==(n=this.popupDropdown)||n.onResize()};this.getTargetElement()?await e():this.elementReadyEvent?(a.$on(this.elementReadyEvent,e),null==(t=window.m)||t.on(this.elementReadyEvent,e)):(console.error('Popup error: targetElement not found and no "elementReadyEvent" specified'),this.$emit("error"))},destroyed(){a.$off("popup:hide",this.hidePopup)},methods:{async clickCta(){this.ctaCallback&&await this.ctaCallback(),this.ctaTriggersComplete&&this.completeStep()},async clickSecondary(){this.secondaryCallback&&await this.secondaryCallback(),this.secondaryTriggersComplete&&this.completeStep()},completeStep(){if(this.subStep)return this.$emit("subStepComplete");this.$emit("stepComplete")},async close(){this.hideCallback&&await this.hideCallback(),this.$emit("dismiss")},getTargetElement(){const t=document.querySelectorAll(this.targetElementSelector);return t.item(this.targetSelectLast?t.length-1:0)},hidePopup(t){this.popupVisible=!t},async closeIfClickOutside(){this.clickOutsideTriggersDismiss&&await this.close()}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,!t.elementReadyEvent||t.eventReady?e("div",{staticClass:"popup-base"},[e("transition",{attrs:{name:"fade-blurred-app",duration:200,appear:""}},[e("base-dropdown-container",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"},{name:"click-outside",rawName:"v-click-outside",value:t.closeIfClickOutside,expression:"closeIfClickOutside"}],ref:"popupDropdown",staticClass:"popup-dropdown app",class:[{"popup-pulse":t.pulseAnimation,"notification-popup":t.notificationStyling,"onboarding-popup":t.onboardingStyling,"brand-full-override":t.notificationStyling,"inverted-system-theme-override":!t.notificationStyling}],attrs:{target:t.getTargetElement(),width:`${t.width}px`,"position-offset":t.targetDistance,alignment:t.alignment,"alignment-offset":t.alignmentOffset,position:t.position,nipple:t.nippleVisible,"close-dropdown":t.hidePopup,"disable-close-event":!0,"nipple-alignment-offset":t.nippleAlignmentOffset,"data-test":"popup","data-test-id":t.id}},[e("base-dropdown-content",{staticClass:"popup-dropdown-content",class:{clickable:!!t.onPopupClicked},on:{click:function(e){var a;null==(a=t.onPopupClicked)||a.call(t)}}},[t.notificationStyling?e("div",{staticClass:"popup-highlight-bar"}):t._e(),t._t("image-content",(function(){return[t.imageUrl?e("div",{staticClass:"popup-image"},[t.visualIsVideo?e("video",{attrs:{src:t.imageUrl,autoplay:!t.$touch,muted:"",loop:""},domProps:{muted:!0}}):e("img",{attrs:{src:t.imageUrl,alt:`${t.headerText} demonstration`}})]):t._e()]})),e("div",{staticClass:"icon-wrapper icon-wrapper-close popup-close",class:[{dark:t.notificationStyling&&t.imageUrl&&!t.notificationStyling.image_has_white_background,light:t.notificationStyling&&t.imageUrl&&t.notificationStyling.image_has_white_background}],attrs:{"data-test":"close"},on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[e("base-icon",{attrs:{src:"icon/close",size:t.notificationStyling||t.onboardingStyling?"13px":"11px"}})],1),e("div",{staticClass:"popup-content"},[t.subHeaderText?e("div",{staticClass:"popup-sub-header"},[t._v(t._s(t.subHeaderText))]):t._e(),t.headerText?e("header",{staticClass:"popup-header"},[e("h3",{staticClass:"popup-title",attrs:{"data-test":"header-text"}},[t.headerBadgeText?e("span",{staticClass:"popup-badge"},[t._v(t._s(t.headerBadgeText))]):t._e(),e("span",[t._v(t._s(t.headerText))])])]):t._e(),e("div",{staticClass:"popup-body",attrs:{"data-test":"body-text"}},[t._v(t._s(t.bodyText))]),t._t("body-content"),t.ctaCallback||t.secondaryCallback||t.ctaTriggersComplete?e("div",{staticClass:"popup-footer"},[e("div",{staticClass:"footer-button-row"},[t.ctaCallback||t.ctaTriggersComplete?e("span",{staticClass:"button button-primary",class:[t.ctaClasses],attrs:{"data-test":"cta"},on:{click:function(e){return e.stopPropagation(),t.clickCta.apply(null,arguments)}}},[t.ctaIcon?e("base-icon",{attrs:{src:t.ctaIcon,size:"11px"}}):t._e(),t._v(" "+t._s(t.ctaText)+" "),t.notificationStyling?e("base-icon",{staticClass:"notification-button-chevron",attrs:{src:"icon/chevron-down",size:"11px"}}):t._e()],1):t._e(),t.secondaryCallback||t.secondaryTriggersComplete?e("span",{staticClass:"button button-neutral",class:[t.secondaryClasses],attrs:{"data-test":"secondary"},on:{click:function(e){return e.stopPropagation(),t.clickSecondary.apply(null,arguments)}}},[t.secondaryIcon?e("base-icon",{attrs:{src:t.secondaryIcon,size:"11px"}}):t._e(),t._v(" "+t._s(t.secondaryText)+" ")],1):t._e()]),t._t("footer")],2):t._e()],2)],2)],1)],1)],1):t._e()}),[],!1,null,"83201869").exports;export{r as default};