const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Launchpad-TjxRx0g2.js","assets/js/bookmarkUtils-CuPNm2UD.js","assets/js/dynamic-import-helper-CTnsj-vI.js","assets/js/array-YYQw31d9.js","assets/js/style-D-IRYiWS.js","assets/css/style-6nm_MYpP.css","assets/js/Logger-cMW5At62.js","assets/js/string-BBKP9xfj.js","assets/js/promisifiedChrome-vBWwQWBS.js","assets/js/useAllComponentsMounted-VdWDSwjD.js","assets/js/showAnyway-8ON2gVJd.js","assets/js/VueBase-C55TLWt3.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/pinia-B4IAWUO-.js","assets/js/portal-vue.esm-DdddSpdW.js","assets/js/reactiveCustomization-CEUTOUc3.js","assets/js/modal-qMFaWR5h.js","assets/js/enums-1c3kgXdw.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/Launchpad-BuIdXodF.css","assets/js/pomodoroCompleted-B2E_m1QL.js","assets/js/persistStore-BDYPfxbs.js","assets/js/focusModeState-BPyBLUbE.js","assets/js/LocalStorageStoreSyncedItem-DMdfjgsv.js","assets/js/PomodoroTimers-CyrfcuWH.js","assets/js/login-HJtMK9QU.js","assets/js/authService-UjcjSrh8.js","assets/js/auth-BwdMrzFn.js","assets/js/legacyUserMigration-CaazFMYU.js","assets/js/migrateLegacyUserMessageHandler-CZ8nZZlg.js","assets/js/onboarding-B35lV45t.js"])))=>i.map(i=>d[i]);
import{_ as t}from"./style-D-IRYiWS.js";import{O as e,ao as n,ak as o,o as s,K as a,ap as i,aq as r,al as c,A as d,u as l}from"./dynamic-import-helper-CTnsj-vI.js";import{T as u}from"./index-CypNqh9b.js";import{useCalendarEventStore as p}from"./calendarEvents-Dg9zHoRV.js";import{computed as h}from"./reactiveCustomization-CEUTOUc3.js";import v from"./BaseIcon-BW2ar6VN.js";import{c as g}from"./accessToken-Cx8MZLdN.js";import{S as f}from"./SmoothReflow-QsxkeVSi.js";import{u as _}from"./useAllComponentsMounted-VdWDSwjD.js";import{n as j}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./array-YYQw31d9.js";import"./Logger-cMW5At62.js";import"./string-BBKP9xfj.js";import"./pinia-B4IAWUO-.js";import"./localStorage-B4mFdj8F.js";import"./legacyUserMigration-CaazFMYU.js";import"./enums-1c3kgXdw.js";import"./migrateLegacyUserMessageHandler-CZ8nZZlg.js";import"./auth-BwdMrzFn.js";import"./persistStore-BDYPfxbs.js";import"./embeddedApp-Bd9r3bdf.js";import"./experiments-6paecGsK.js";import"./flashMessageQueue-C7gl3k6c.js";import"./info-DdD9a7JK.js";import"./constants-Bt_TxKWw.js";import"./index-DHG7crjO.js";import"./appZStack-Zxx-wHpo.js";import"./ResizeSensor-ZXOsDHeC.js";import"./promisifiedChrome-vBWwQWBS.js";import"./modal-BWwnzHDf.js";import"./index-DHQKZcbZ.js";import"./VueBase-C55TLWt3.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./portal-vue.esm-DdddSpdW.js";const y=j(e({name:"Schedule",components:{ThreeColLayout:u,BaseIcon:v,Launchpad:()=>t((()=>import("./Launchpad-TjxRx0g2.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])),SmoothReflow:f},setup:()=>({..._(),formatTime:n,calendarEventStore:p(),MS_IN_1_MINUTE:o,openWindow:s,connectToGoogleCalendar:g,isSafari:a()}),computed:{launchpadVisible:()=>h.launchpadVisible,todayDate(){const t=m.models.date.get("hour").getTime();return new Date(t).getDate()},today(){const t=m.models.date.get("hour").getTime(),e=new Date(t);return`${i(e,!1)} ${r(e)}`},todayEvents(){const t=m.models.date.get("date").getTime();return this.calendarEventStore.getEventsForDay(0).map((e=>({...e,isInMoreThan5Minutes:e.start>t+5*o,timeUntilString:e.start>t+45*o?"in "+Math.round((e.start-t)/c)+" hr":"in "+Math.round((e.start-t)/o)+" min"}))).filter((t=>!t.allDay&&t.end>m.models.date.get("date").getTime()))},event(){return this.todayEvents[0]},todayEventsString(){const t=this.todayEvents.length-1;return t<=0?"":"+"+t+" more"},focusUntilString(){var t;if(!this.calendarEventStore.nextEvent)return"";const e=(null==(t=this.calendarEventStore.nextEvent)?void 0:t.start)-5*o;return m.models.date.get("date").getTime()>=e?"":n(new Date(e))},ctaButton(){if(!this.calendarEventStore.linked)return{action:()=>g("center below calendar"),icon:"icon/google-calendar",text:"Connect to Google Calendar"};if(this.event&&!this.event.isInMoreThan5Minutes&&this.event.meetingLink){const t=this.event.meetingLink;return{action:()=>s(t),icon:"icon-log-in",text:"Join meeting"}}if(this.event&&this.event.isInMoreThan5Minutes&&this.focusUntilString&&!this.$touch)return{action:this.countdownFocus,icon:"icon/apps/focus-mode",text:"Focus until "+this.focusUntilString};if(this.event){const t=this.event;return{action:()=>this.openEvent(t),icon:"icon/date/calendar-link",text:"Open event"}}return this.$touch?null:{action:this.startFocusMode,icon:"icon/apps/focus-mode",text:"Start Focusing"}}},mounted(){this.calendarEventStore.refresh()},methods:{async countdownFocus(){d.capture("calendar focus until event click",{feature:"calendar"});const e=(await t((async()=>{const{usePomodoroSessionStore:t}=await import("./pomodoroCompleted-B2E_m1QL.js").then((t=>t.b));return{usePomodoroSessionStore:t}}),__vite__mapDeps([21,2,3,4,5,6,7,22,23,24,25,16,11,12,13,14,15,8,26,27,28,29,18,30,31,17]))).usePomodoroSessionStore();await l((()=>e.loaded)).toBe(!0),e.playing&&await e.complete({switchAfterComplete:!1,completedManually:!0}),await e.update({countDownTimerLength:this.calendarEventStore.nextEvent.start-Date.now()-5*o}),this.startFocusMode()},startFocusMode(){m.trigger("focusMode:start")},openEvent(t){d.capture("calendar event click",{feature:"calendar"}),s(t.link)}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"dash-schedule app-container hide-apps-no-fade",attrs:{"data-test":"dash-schedule"}},[e("three-col-layout",{staticClass:"has-dash-icon big-search-wrapper",scopedSlots:t._u([{key:"left",fn:function(){return[t._t("nav")]},proxy:!0},{key:"center",fn:function(){return[e("div",{staticClass:"schedule hide-apps-fade"},[e("div",{staticClass:"schedule-buttons"},[t.ctaButton?e("div",{staticClass:"button dash-button",attrs:{"data-test":"calendar-cta"},on:{click:t.ctaButton.action}},[e("span",[e("base-icon",{attrs:{src:t.ctaButton.icon,size:"16px"}}),t._v(" "+t._s(t.ctaButton.text)+" ")],1)]):t._e()]),e("div",{staticClass:"schedule-below-buttons",attrs:{"data-test":"description-line"}},[e("svg",{staticClass:"calendar-icon-with-text",attrs:{width:"19",height:"19",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8 2V6M16 2V6M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("text",{attrs:{x:"50%",y:"60%","dominant-baseline":"middle","text-anchor":"middle"}},[t._v(t._s(t.todayDate))])]),t.calendarEventStore.linked?t.event?t.event?[e("div",{staticClass:"event",on:{click:function(e){return t.openWindow(t.event.link)}}},[e("div",{staticClass:"summary"},[t._v(t._s(t.event.summary))]),e("div",[t._v(t._s(t.formatTime(new Date(t.event.start)))+" - "+t._s(t.formatTime(new Date(t.event.end))))])]),t.todayEventsString?e("div",{staticClass:"more-events",on:{click:function(e){return t.openWindow("https://calendar.google.com/calendar/u/0/r/day")}}},[t._v(t._s(t.todayEventsString))]):t._e(),t.calendarEventStore.staleDataWarningVisible?e("base-icon",{attrs:{src:"icon/info",title:"There was an issue getting your events. The data you see may not be up to date"}}):t._e()]:t._e():e("div",[t._v("No events")]):e("div",[t._v("Connect your calendar to see your next events")])],2)])]},proxy:!0}],null,!0)}),t.isSafari?t._e():e("smooth-reflow",{staticClass:"launchpad-container",attrs:{"await-apps-ready":!0}},[t.launchpadVisible?e("launchpad"):t._e()],1)],1)}),[],!1,null,"8b954227").exports;export{y as default};